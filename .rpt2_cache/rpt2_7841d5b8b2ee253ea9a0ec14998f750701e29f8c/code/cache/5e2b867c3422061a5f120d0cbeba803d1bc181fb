{
  "code": "import { ICharRender } from \"./ICharRender\";\r\nimport { Browser } from \"../../utils/Browser\";\r\nexport class CharRender_Canvas extends ICharRender {\r\n    constructor(maxw, maxh, scalefont = true, useImageData = true, showdbg = false) {\r\n        super();\r\n        this.ctx = null;\r\n        this.lastScaleX = 1.0;\r\n        this.lastScaleY = 1.0;\r\n        this.maxTexW = 0;\r\n        this.maxTexH = 0;\r\n        this.scaleFontSize = true;\r\n        this.showDbgInfo = false;\r\n        this.supportImageData = true;\r\n        this.maxTexW = maxw;\r\n        this.maxTexH = maxh;\r\n        this.scaleFontSize = scalefont;\r\n        this.supportImageData = useImageData;\r\n        this.showDbgInfo = showdbg;\r\n        if (!CharRender_Canvas.canvas) {\r\n            CharRender_Canvas.canvas = Browser.createElement('canvas');\r\n            CharRender_Canvas.canvas.width = 1024;\r\n            CharRender_Canvas.canvas.height = 512;\r\n            CharRender_Canvas.canvas.style.left = \"-10000px\";\r\n            CharRender_Canvas.canvas.style.position = \"absolute\";\r\n            document.body.appendChild(CharRender_Canvas.canvas);\r\n            ;\r\n            this.ctx = CharRender_Canvas.canvas.getContext('2d');\r\n        }\r\n    }\r\n    get canvasWidth() {\r\n        return CharRender_Canvas.canvas.width;\r\n    }\r\n    set canvasWidth(w) {\r\n        if (CharRender_Canvas.canvas.width == w)\r\n            return;\r\n        CharRender_Canvas.canvas.width = w;\r\n        if (w > 2048) {\r\n            console.warn(\"画文字设置的宽度太大，超过2048了\");\r\n        }\r\n        this.ctx.setTransform(1, 0, 0, 1, 0, 0);\r\n        this.ctx.scale(this.lastScaleX, this.lastScaleY);\r\n    }\r\n    getWidth(font, str) {\r\n        if (!this.ctx)\r\n            return 0;\r\n        if (this.ctx._lastFont != font) {\r\n            this.ctx.font = font;\r\n            this.ctx._lastFont = font;\r\n        }\r\n        return this.ctx.measureText(str).width;\r\n    }\r\n    scale(sx, sy) {\r\n        if (!this.supportImageData) {\r\n            this.lastScaleX = sx;\r\n            this.lastScaleY = sy;\r\n            return;\r\n        }\r\n        if (this.lastScaleX != sx || this.lastScaleY != sy) {\r\n            this.ctx.setTransform(sx, 0, 0, sy, 0, 0);\r\n            this.lastScaleX = sx;\r\n            this.lastScaleY = sy;\r\n        }\r\n    }\r\n    getCharBmp(char, font, lineWidth, colStr, strokeColStr, cri, margin_left, margin_top, margin_right, margin_bottom, rect = null) {\r\n        if (!this.supportImageData)\r\n            return this.getCharCanvas(char, font, lineWidth, colStr, strokeColStr, cri, margin_left, margin_top, margin_right, margin_bottom);\r\n        var ctx = this.ctx;\r\n        var sz = this.fontsz;\r\n        if (ctx.font != font) {\r\n            ctx.font = font;\r\n            ctx._lastFont = font;\r\n        }\r\n        cri.width = ctx.measureText(char).width;\r\n        var w = cri.width * this.lastScaleX;\r\n        var h = cri.height * this.lastScaleY;\r\n        w += (margin_left + margin_right) * this.lastScaleX;\r\n        h += (margin_top + margin_bottom) * this.lastScaleY;\r\n        w = Math.ceil(w);\r\n        h = Math.ceil(h);\r\n        w = Math.min(w, CharRender_Canvas.canvas.width);\r\n        h = Math.min(h, CharRender_Canvas.canvas.height);\r\n        var clearW = w + lineWidth * 2 + 1;\r\n        var clearH = h + lineWidth * 2 + 1;\r\n        if (rect) {\r\n            clearW = Math.max(clearW, rect[0] + rect[2] + 1);\r\n            clearH = Math.max(clearH, rect[1] + rect[3] + 1);\r\n        }\r\n        ctx.clearRect(0, 0, clearW / this.lastScaleX + 1, clearH / this.lastScaleY + 1);\r\n        ctx.save();\r\n        ctx.textBaseline = \"middle\";\r\n        if (lineWidth > 0) {\r\n            ctx.strokeStyle = strokeColStr;\r\n            ctx.lineWidth = lineWidth;\r\n            ctx.strokeText(char, margin_left, margin_top + sz / 2);\r\n        }\r\n        if (colStr) {\r\n            ctx.fillStyle = colStr;\r\n            ctx.fillText(char, margin_left, margin_top + sz / 2);\r\n        }\r\n        if (this.showDbgInfo) {\r\n            ctx.strokeStyle = '#ff0000';\r\n            ctx.strokeRect(1, 1, w - 2, h - 2);\r\n            ctx.strokeStyle = '#00ff00';\r\n            ctx.strokeRect(margin_left, margin_top, cri.width, cri.height);\r\n        }\r\n        if (rect) {\r\n            if (rect[2] == -1)\r\n                rect[2] = Math.ceil((cri.width + lineWidth * 2) * this.lastScaleX);\r\n        }\r\n        var imgdt = rect ? (ctx.getImageData(rect[0], rect[1], rect[2], rect[3] + 1)) : (ctx.getImageData(0, 0, w, h + 1));\r\n        ctx.restore();\r\n        cri.bmpWidth = imgdt.width;\r\n        cri.bmpHeight = imgdt.height;\r\n        return imgdt;\r\n    }\r\n    getCharCanvas(char, font, lineWidth, colStr, strokeColStr, cri, margin_left, margin_top, margin_right, margin_bottom) {\r\n        var ctx = this.ctx;\r\n        if (ctx.font != font) {\r\n            ctx.font = font;\r\n            ctx._lastFont = font;\r\n        }\r\n        cri.width = ctx.measureText(char).width;\r\n        var w = cri.width * this.lastScaleX;\r\n        var h = cri.height * this.lastScaleY;\r\n        w += (margin_left + margin_right) * this.lastScaleX;\r\n        h += ((margin_top + margin_bottom) * this.lastScaleY + 1);\r\n        w = Math.min(w, this.maxTexW);\r\n        h = Math.min(h, this.maxTexH);\r\n        CharRender_Canvas.canvas.width = Math.min(w + 1, this.maxTexW);\r\n        CharRender_Canvas.canvas.height = Math.min(h + 1, this.maxTexH);\r\n        ctx.font = font;\r\n        ctx.clearRect(0, 0, w + 1 + lineWidth, h + 1 + lineWidth);\r\n        ctx.setTransform(1, 0, 0, 1, 0, 0);\r\n        ctx.save();\r\n        if (this.scaleFontSize) {\r\n            ctx.scale(this.lastScaleX, this.lastScaleY);\r\n        }\r\n        ctx.translate(margin_left, margin_top);\r\n        ctx.textAlign = \"left\";\r\n        var sz = this.fontsz;\r\n        ctx.textBaseline = \"middle\";\r\n        if (lineWidth > 0) {\r\n            ctx.strokeStyle = strokeColStr;\r\n            ctx.fillStyle = colStr;\r\n            ctx.lineWidth = lineWidth;\r\n            if (ctx.fillAndStrokeText) {\r\n                ctx.fillAndStrokeText(char, 0, sz / 2);\r\n            }\r\n            else {\r\n                ctx.strokeText(char, 0, sz / 2);\r\n                ctx.fillText(char, 0, sz / 2);\r\n            }\r\n        }\r\n        else if (colStr) {\r\n            ctx.fillStyle = colStr;\r\n            ctx.fillText(char, 0, sz / 2);\r\n        }\r\n        if (this.showDbgInfo) {\r\n            ctx.strokeStyle = '#ff0000';\r\n            ctx.strokeRect(0, 0, w, h);\r\n            ctx.strokeStyle = '#00ff00';\r\n            ctx.strokeRect(0, 0, cri.width, cri.height);\r\n        }\r\n        ctx.restore();\r\n        cri.bmpWidth = CharRender_Canvas.canvas.width;\r\n        cri.bmpHeight = CharRender_Canvas.canvas.height;\r\n        return CharRender_Canvas.canvas;\r\n    }\r\n}\r\nCharRender_Canvas.canvas = null;\r\n//# sourceMappingURL=CharRender_Canvas.js.map",
  "references": [
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/webgl/text/CharRenderInfo.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/webgl/text/ICharRender.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/utils/Browser.ts"
  ],
  "map": "{\"version\":3,\"file\":\"CharRender_Canvas.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../libs/laya/webgl/text/CharRender_Canvas.ts\"],\"names\":[],\"mappings\":\"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\"}",
  "dts": {
    "name": "D:/widgets/LayaDataStructuresAlgorithms/.rpt2_cache/placeholder/laya/webgl/text/CharRender_Canvas.d.ts",
    "writeByteOrderMark": false,
    "text": "import { CharRenderInfo } from \"./CharRenderInfo\";\r\nimport { ICharRender } from \"./ICharRender\";\r\nexport declare class CharRender_Canvas extends ICharRender {\r\n    private static canvas;\r\n    private ctx;\r\n    private lastScaleX;\r\n    private lastScaleY;\r\n    private maxTexW;\r\n    private maxTexH;\r\n    private scaleFontSize;\r\n    private showDbgInfo;\r\n    private supportImageData;\r\n    constructor(maxw: number, maxh: number, scalefont?: boolean, useImageData?: boolean, showdbg?: boolean);\r\n    canvasWidth: number;\r\n    getWidth(font: string, str: string): number;\r\n    scale(sx: number, sy: number): void;\r\n    getCharBmp(char: string, font: string, lineWidth: number, colStr: string, strokeColStr: string, cri: CharRenderInfo, margin_left: number, margin_top: number, margin_right: number, margin_bottom: number, rect?: any[] | null): ImageData | null;\r\n    getCharCanvas(char: string, font: string, lineWidth: number, colStr: string, strokeColStr: string, cri: CharRenderInfo, margin_left: number, margin_top: number, margin_right: number, margin_bottom: number): ImageData;\r\n}\r\n"
  }
}
