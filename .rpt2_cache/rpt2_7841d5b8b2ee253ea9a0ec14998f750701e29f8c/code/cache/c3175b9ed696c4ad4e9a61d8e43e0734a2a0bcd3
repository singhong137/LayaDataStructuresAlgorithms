{
  "code": "import { Matrix } from \"../../maths/Matrix\";\r\nimport { Value2D } from \"../shader/d2/value/Value2D\";\r\nimport { CONST3D2D } from \"../utils/CONST3D2D\";\r\nimport { RenderState2D } from \"../utils/RenderState2D\";\r\nimport { SubmitBase } from \"./SubmitBase\";\r\nexport class SubmitCanvas extends SubmitBase {\r\n    constructor() {\r\n        super(SubmitBase.TYPE_2D);\r\n        this._matrix = new Matrix();\r\n        this._matrix4 = CONST3D2D.defaultMatrix4.concat();\r\n        this.shaderValue = new Value2D(0, 0);\r\n    }\r\n    static create(canvas, alpha, filters) {\r\n        var o = (!SubmitCanvas.POOL._length) ? (new SubmitCanvas()) : SubmitCanvas.POOL[--SubmitCanvas.POOL._length];\r\n        o.canv = canvas;\r\n        o._ref = 1;\r\n        o._numEle = 0;\r\n        var v = o.shaderValue;\r\n        v.alpha = alpha;\r\n        v.defines.setValue(0);\r\n        filters && filters.length && v.setFilters(filters);\r\n        return o;\r\n    }\r\n    renderSubmit() {\r\n        var preAlpha = RenderState2D.worldAlpha;\r\n        var preMatrix4 = RenderState2D.worldMatrix4;\r\n        var preMatrix = RenderState2D.worldMatrix;\r\n        var preFilters = RenderState2D.worldFilters;\r\n        var preWorldShaderDefines = RenderState2D.worldShaderDefines;\r\n        var v = this.shaderValue;\r\n        var m = this._matrix;\r\n        var m4 = this._matrix4;\r\n        var mout = Matrix.TEMP;\r\n        Matrix.mul(m, preMatrix, mout);\r\n        m4[0] = mout.a;\r\n        m4[1] = mout.b;\r\n        m4[4] = mout.c;\r\n        m4[5] = mout.d;\r\n        m4[12] = mout.tx;\r\n        m4[13] = mout.ty;\r\n        RenderState2D.worldMatrix = mout.clone();\r\n        RenderState2D.worldMatrix4 = m4;\r\n        RenderState2D.worldAlpha = RenderState2D.worldAlpha * v.alpha;\r\n        if (v.filters && v.filters.length) {\r\n            RenderState2D.worldFilters = v.filters;\r\n            RenderState2D.worldShaderDefines = v.defines;\r\n        }\r\n        this.canv['flushsubmit']();\r\n        RenderState2D.worldAlpha = preAlpha;\r\n        RenderState2D.worldMatrix4 = preMatrix4;\r\n        RenderState2D.worldMatrix.destroy();\r\n        RenderState2D.worldMatrix = preMatrix;\r\n        RenderState2D.worldFilters = preFilters;\r\n        RenderState2D.worldShaderDefines = preWorldShaderDefines;\r\n        return 1;\r\n    }\r\n    releaseRender() {\r\n        if ((--this._ref) < 1) {\r\n            var cache = SubmitCanvas.POOL;\r\n            this._mesh = null;\r\n            cache[cache._length++] = this;\r\n        }\r\n    }\r\n    getRenderType() {\r\n        return SubmitBase.TYPE_CANVAS;\r\n    }\r\n    ;\r\n}\r\nSubmitCanvas.POOL = [];\r\n{\r\n    SubmitCanvas.POOL._length = 0;\r\n}\r\n//# sourceMappingURL=SubmitCanvas.js.map",
  "references": [
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/maths/Matrix.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/resource/Context.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/webgl/shader/d2/ShaderDefines2D.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/webgl/shader/d2/value/Value2D.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/webgl/utils/CONST3D2D.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/webgl/utils/RenderState2D.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/webgl/submit/SubmitBase.ts"
  ],
  "map": "{\"version\":3,\"file\":\"SubmitCanvas.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../libs/laya/webgl/submit/SubmitCanvas.ts\"],\"names\":[],\"mappings\":\"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\"}",
  "dts": {
    "name": "D:/widgets/LayaDataStructuresAlgorithms/.rpt2_cache/placeholder/laya/webgl/submit/SubmitCanvas.d.ts",
    "writeByteOrderMark": false,
    "text": "import { Matrix } from \"../../maths/Matrix\";\r\nimport { Context } from \"../../resource/Context\";\r\nimport { SubmitBase } from \"./SubmitBase\";\r\nexport declare class SubmitCanvas extends SubmitBase {\r\n    _matrix: Matrix;\r\n    canv: Context;\r\n    _matrix4: any[];\r\n    static create(canvas: any, alpha: number, filters: any[]): SubmitCanvas;\r\n    constructor();\r\n    renderSubmit(): number;\r\n    releaseRender(): void;\r\n    getRenderType(): number;\r\n    static POOL: any;\r\n}\r\n"
  }
}
