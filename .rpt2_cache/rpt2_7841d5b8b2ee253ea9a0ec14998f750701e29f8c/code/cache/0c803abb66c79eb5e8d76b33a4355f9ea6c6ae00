{
  "code": "import { Event } from \"./Event\";\r\nimport { TouchManager } from \"./TouchManager\";\r\nimport { Input } from \"../display/Input\";\r\nimport { Point } from \"../maths/Point\";\r\nimport { Rectangle } from \"../maths/Rectangle\";\r\nimport { Browser } from \"../utils/Browser\";\r\nimport { ILaya } from \"../../ILaya\";\r\nexport class MouseManager {\r\n    constructor() {\r\n        this.mouseX = 0;\r\n        this.mouseY = 0;\r\n        this.disableMouseEvent = false;\r\n        this.mouseDownTime = 0;\r\n        this.mouseMoveAccuracy = 2;\r\n        this._event = new Event();\r\n        this._captureSp = null;\r\n        this._captureChain = [];\r\n        this._captureExlusiveMode = false;\r\n        this._hitCaputreSp = false;\r\n        this._point = new Point();\r\n        this._rect = new Rectangle();\r\n        this._lastMoveTimer = 0;\r\n        this._prePoint = new Point();\r\n        this._touchIDs = {};\r\n        this._curTouchID = NaN;\r\n        this._id = 1;\r\n    }\r\n    __init__(stage, canvas) {\r\n        this._stage = stage;\r\n        var _this = this;\r\n        canvas.oncontextmenu = function (e) {\r\n            if (MouseManager.enabled)\r\n                return false;\r\n        };\r\n        canvas.addEventListener('mousedown', function (e) {\r\n            if (MouseManager.enabled) {\r\n                if (!Browser.onIE)\r\n                    (e.cancelable) && (e.preventDefault());\r\n                _this.mouseDownTime = Browser.now();\r\n                _this.runEvent(e);\r\n            }\r\n        });\r\n        canvas.addEventListener('mouseup', function (e) {\r\n            if (MouseManager.enabled) {\r\n                (e.cancelable) && (e.preventDefault());\r\n                _this.mouseDownTime = -Browser.now();\r\n                _this.runEvent(e);\r\n            }\r\n        }, true);\r\n        canvas.addEventListener('mousemove', function (e) {\r\n            if (MouseManager.enabled) {\r\n                (e.cancelable) && (e.preventDefault());\r\n                var now = Browser.now();\r\n                if (now - _this._lastMoveTimer < 10)\r\n                    return;\r\n                _this._lastMoveTimer = now;\r\n                _this.runEvent(e);\r\n            }\r\n        }, true);\r\n        canvas.addEventListener(\"mouseout\", function (e) {\r\n            if (MouseManager.enabled)\r\n                _this.runEvent(e);\r\n        });\r\n        canvas.addEventListener(\"mouseover\", function (e) {\r\n            if (MouseManager.enabled)\r\n                _this.runEvent(e);\r\n        });\r\n        canvas.addEventListener(\"touchstart\", function (e) {\r\n            if (MouseManager.enabled) {\r\n                if (!MouseManager._isFirstTouch && !Input.isInputting)\r\n                    (e.cancelable) && (e.preventDefault());\r\n                _this.mouseDownTime = Browser.now();\r\n                _this.runEvent(e);\r\n            }\r\n        });\r\n        canvas.addEventListener(\"touchend\", function (e) {\r\n            if (MouseManager.enabled) {\r\n                if (!MouseManager._isFirstTouch && !Input.isInputting)\r\n                    (e.cancelable) && (e.preventDefault());\r\n                MouseManager._isFirstTouch = false;\r\n                _this.mouseDownTime = -Browser.now();\r\n                _this.runEvent(e);\r\n            }\r\n            else {\r\n                _this._curTouchID = NaN;\r\n            }\r\n        }, true);\r\n        canvas.addEventListener(\"touchmove\", function (e) {\r\n            if (MouseManager.enabled) {\r\n                (e.cancelable) && (e.preventDefault());\r\n                _this.runEvent(e);\r\n            }\r\n        }, true);\r\n        canvas.addEventListener(\"touchcancel\", function (e) {\r\n            if (MouseManager.enabled) {\r\n                (e.cancelable) && (e.preventDefault());\r\n                _this.runEvent(e);\r\n            }\r\n            else {\r\n                _this._curTouchID = NaN;\r\n            }\r\n        }, true);\r\n        canvas.addEventListener('mousewheel', function (e) {\r\n            if (MouseManager.enabled)\r\n                _this.runEvent(e);\r\n        });\r\n        canvas.addEventListener('DOMMouseScroll', function (e) {\r\n            if (MouseManager.enabled)\r\n                _this.runEvent(e);\r\n        });\r\n    }\r\n    initEvent(e, nativeEvent = null) {\r\n        var _this = this;\r\n        _this._event._stoped = false;\r\n        _this._event.nativeEvent = nativeEvent || e;\r\n        _this._target = null;\r\n        this._point.setTo(e.pageX || e.clientX, e.pageY || e.clientY);\r\n        if (this._stage._canvasTransform) {\r\n            this._stage._canvasTransform.invertTransformPoint(this._point);\r\n            _this.mouseX = this._point.x;\r\n            _this.mouseY = this._point.y;\r\n        }\r\n        _this._event.touchId = e.identifier || 0;\r\n        this._tTouchID = _this._event.touchId;\r\n        var evt;\r\n        evt = TouchManager.I._event;\r\n        evt._stoped = false;\r\n        evt.nativeEvent = _this._event.nativeEvent;\r\n        evt.touchId = _this._event.touchId;\r\n    }\r\n    checkMouseWheel(e) {\r\n        this._event.delta = e.wheelDelta ? e.wheelDelta * 0.025 : -e.detail;\r\n        var _lastOvers = TouchManager.I.getLastOvers();\r\n        for (var i = 0, n = _lastOvers.length; i < n; i++) {\r\n            var ele = _lastOvers[i];\r\n            ele.event(Event.MOUSE_WHEEL, this._event.setTo(Event.MOUSE_WHEEL, ele, this._target));\r\n        }\r\n    }\r\n    onMouseMove(ele) {\r\n        TouchManager.I.onMouseMove(ele, this._tTouchID);\r\n    }\r\n    onMouseDown(ele) {\r\n        if (Input.isInputting && ILaya.stage.focus && ILaya.stage.focus[\"focus\"] && !ILaya.stage.focus.contains(this._target)) {\r\n            var pre_input = ILaya.stage.focus['_tf'] || ILaya.stage.focus;\r\n            var new_input = ele['_tf'] || ele;\r\n            if (new_input instanceof Input && new_input.multiline == pre_input.multiline)\r\n                pre_input['_focusOut']();\r\n            else\r\n                pre_input.focus = false;\r\n        }\r\n        TouchManager.I.onMouseDown(ele, this._tTouchID, this._isLeftMouse);\r\n    }\r\n    onMouseUp(ele) {\r\n        TouchManager.I.onMouseUp(ele, this._tTouchID, this._isLeftMouse);\r\n    }\r\n    check(sp, mouseX, mouseY, callBack) {\r\n        this._point.setTo(mouseX, mouseY);\r\n        sp.fromParentPoint(this._point);\r\n        mouseX = this._point.x;\r\n        mouseY = this._point.y;\r\n        var scrollRect = sp._style.scrollRect;\r\n        if (scrollRect) {\r\n            this._rect.setTo(scrollRect.x, scrollRect.y, scrollRect.width, scrollRect.height);\r\n            if (!this._rect.contains(mouseX, mouseY))\r\n                return false;\r\n        }\r\n        if (!this.disableMouseEvent) {\r\n            if (sp.hitTestPrior && !sp.mouseThrough && !this.hitTest(sp, mouseX, mouseY)) {\r\n                return false;\r\n            }\r\n            for (var i = sp._children.length - 1; i > -1; i--) {\r\n                var child = sp._children[i];\r\n                if (!child.destroyed && child._mouseState > 1 && child._visible) {\r\n                    if (this.check(child, mouseX, mouseY, callBack))\r\n                        return true;\r\n                }\r\n            }\r\n            for (i = sp._extUIChild.length - 1; i >= 0; i--) {\r\n                var c = sp._extUIChild[i];\r\n                if (!c.destroyed && c._mouseState > 1 && c._visible) {\r\n                    if (this.check(c, mouseX, mouseY, callBack))\r\n                        return true;\r\n                }\r\n            }\r\n        }\r\n        var isHit = (sp.hitTestPrior && !sp.mouseThrough && !this.disableMouseEvent) ? true : this.hitTest(sp, mouseX, mouseY);\r\n        if (isHit) {\r\n            this._target = sp;\r\n            callBack.call(this, sp);\r\n            if (this._target == this._hitCaputreSp) {\r\n                this._hitCaputreSp = true;\r\n            }\r\n        }\r\n        else if (callBack === this.onMouseUp && sp === this._stage) {\r\n            this._target = this._stage;\r\n            callBack.call(this, this._target);\r\n        }\r\n        return isHit;\r\n    }\r\n    hitTest(sp, mouseX, mouseY) {\r\n        var isHit = false;\r\n        if (sp.scrollRect) {\r\n            mouseX -= sp._style.scrollRect.x;\r\n            mouseY -= sp._style.scrollRect.y;\r\n        }\r\n        var hitArea = sp._style.hitArea;\r\n        if (hitArea && hitArea._hit) {\r\n            return hitArea.contains(mouseX, mouseY);\r\n        }\r\n        if (sp.width > 0 && sp.height > 0 || sp.mouseThrough || hitArea) {\r\n            if (!sp.mouseThrough) {\r\n                isHit = (hitArea ? hitArea : this._rect.setTo(0, 0, sp.width, sp.height)).contains(mouseX, mouseY);\r\n            }\r\n            else {\r\n                isHit = sp.getGraphicBounds().contains(mouseX, mouseY);\r\n            }\r\n        }\r\n        return isHit;\r\n    }\r\n    _checkAllBaseUI(mousex, mousey, callback) {\r\n        var ret = this.handleExclusiveCapture(this.mouseX, this.mouseY, callback);\r\n        if (ret)\r\n            return true;\r\n        ret = this.check(this._stage, this.mouseX, this.mouseY, callback);\r\n        return this.handleCapture(this.mouseX, this.mouseY, callback) || ret;\r\n    }\r\n    check3DUI(mousex, mousey, callback) {\r\n        var uis = this._stage._3dUI;\r\n        var i = 0;\r\n        var ret = false;\r\n        for (; i < uis.length; i++) {\r\n            var curui = uis[i];\r\n            this._stage._curUIBase = curui;\r\n            if (!curui.destroyed && curui._mouseState > 1 && curui._visible) {\r\n                ret = ret || this.check(curui, this.mouseX, this.mouseY, callback);\r\n            }\r\n        }\r\n        this._stage._curUIBase = this._stage;\r\n        return ret;\r\n    }\r\n    handleExclusiveCapture(mousex, mousey, callback) {\r\n        if (this._captureExlusiveMode && this._captureSp && this._captureChain.length > 0) {\r\n            var cursp;\r\n            this._point.setTo(mousex, mousey);\r\n            for (var i = 0; i < this._captureChain.length; i++) {\r\n                cursp = this._captureChain[i];\r\n                cursp.fromParentPoint(this._point);\r\n            }\r\n            this._target = cursp;\r\n            callback.call(this, cursp);\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    handleCapture(mousex, mousey, callback) {\r\n        if (!this._hitCaputreSp && this._captureSp && this._captureChain.length > 0) {\r\n            var cursp;\r\n            this._point.setTo(mousex, mousey);\r\n            for (var i = 0; i < this._captureChain.length; i++) {\r\n                cursp = this._captureChain[i];\r\n                cursp.fromParentPoint(this._point);\r\n            }\r\n            this._target = cursp;\r\n            callback.call(this, cursp);\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    runEvent(evt) {\r\n        var _this = this;\r\n        var i, n, touch;\r\n        if (evt.type !== 'mousemove')\r\n            this._prePoint.x = this._prePoint.y = -1000000;\r\n        switch (evt.type) {\r\n            case 'mousedown':\r\n                this._touchIDs[0] = this._id++;\r\n                if (!MouseManager._isTouchRespond) {\r\n                    this._isLeftMouse = evt.button === 0;\r\n                    this.initEvent(evt);\r\n                    this._checkAllBaseUI(this.mouseX, this.mouseY, this.onMouseDown);\r\n                }\r\n                else\r\n                    MouseManager._isTouchRespond = false;\r\n                break;\r\n            case 'mouseup':\r\n                this._isLeftMouse = evt.button === 0;\r\n                this.initEvent(evt);\r\n                this._checkAllBaseUI(this.mouseX, this.mouseY, this.onMouseUp);\r\n                break;\r\n            case 'mousemove':\r\n                if ((Math.abs(this._prePoint.x - evt.clientX) + Math.abs(this._prePoint.y - evt.clientY)) >= this.mouseMoveAccuracy) {\r\n                    this._prePoint.x = evt.clientX;\r\n                    this._prePoint.y = evt.clientY;\r\n                    this.initEvent(evt);\r\n                    this._checkAllBaseUI(this.mouseX, this.mouseY, this.onMouseMove);\r\n                }\r\n                break;\r\n            case \"touchstart\":\r\n                MouseManager._isTouchRespond = true;\r\n                this._isLeftMouse = true;\r\n                var touches = evt.changedTouches;\r\n                for (i = 0, n = touches.length; i < n; i++) {\r\n                    touch = touches[i];\r\n                    if (MouseManager.multiTouchEnabled || isNaN(this._curTouchID)) {\r\n                        this._curTouchID = touch.identifier;\r\n                        if (this._id % 200 === 0)\r\n                            this._touchIDs = {};\r\n                        this._touchIDs[touch.identifier] = this._id++;\r\n                        this.initEvent(touch, evt);\r\n                        this._checkAllBaseUI(this.mouseX, this.mouseY, this.onMouseDown);\r\n                    }\r\n                }\r\n                break;\r\n            case \"touchend\":\r\n            case \"touchcancel\":\r\n                MouseManager._isTouchRespond = true;\r\n                this._isLeftMouse = true;\r\n                var touchends = evt.changedTouches;\r\n                for (i = 0, n = touchends.length; i < n; i++) {\r\n                    touch = touchends[i];\r\n                    if (MouseManager.multiTouchEnabled || touch.identifier == this._curTouchID) {\r\n                        this._curTouchID = NaN;\r\n                        this.initEvent(touch, evt);\r\n                        var isChecked;\r\n                        isChecked = this._checkAllBaseUI(this.mouseX, this.mouseY, this.onMouseUp);\r\n                        if (!isChecked) {\r\n                            this.onMouseUp(null);\r\n                        }\r\n                    }\r\n                }\r\n                break;\r\n            case \"touchmove\":\r\n                var touchemoves = evt.changedTouches;\r\n                for (i = 0, n = touchemoves.length; i < n; i++) {\r\n                    touch = touchemoves[i];\r\n                    if (MouseManager.multiTouchEnabled || touch.identifier == this._curTouchID) {\r\n                        this.initEvent(touch, evt);\r\n                        this._checkAllBaseUI(this.mouseX, this.mouseY, this.onMouseMove);\r\n                    }\r\n                }\r\n                break;\r\n            case \"wheel\":\r\n            case \"mousewheel\":\r\n            case \"DOMMouseScroll\":\r\n                this.checkMouseWheel(evt);\r\n                break;\r\n            case \"mouseout\":\r\n                TouchManager.I.stageMouseOut();\r\n                break;\r\n            case \"mouseover\":\r\n                this._stage.event(Event.MOUSE_OVER, this._event.setTo(Event.MOUSE_OVER, this._stage, this._stage));\r\n                break;\r\n        }\r\n    }\r\n    setCapture(sp, exclusive = false) {\r\n        this._captureSp = sp;\r\n        this._captureExlusiveMode = exclusive;\r\n        this._captureChain.length = 0;\r\n        this._captureChain.push(sp);\r\n        var cursp = sp;\r\n        while (true) {\r\n            if (cursp == ILaya.stage)\r\n                break;\r\n            if (cursp == ILaya.stage._curUIBase)\r\n                break;\r\n            cursp = cursp.parent;\r\n            if (!cursp)\r\n                break;\r\n            this._captureChain.splice(0, 0, cursp);\r\n        }\r\n    }\r\n    releaseCapture() {\r\n        console.log('release capture');\r\n        this._captureSp = null;\r\n    }\r\n}\r\nMouseManager.instance = new MouseManager();\r\nMouseManager.enabled = true;\r\nMouseManager.multiTouchEnabled = true;\r\nMouseManager._isFirstTouch = true;\r\n//# sourceMappingURL=MouseManager.js.map",
  "references": [
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/events/Event.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/events/TouchManager.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/display/Input.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/display/Sprite.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/maths/Point.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/maths/Rectangle.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/utils/Browser.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/display/Stage.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/ILaya.ts"
  ],
  "map": "{\"version\":3,\"file\":\"MouseManager.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../libs/laya/events/MouseManager.ts\"],\"names\":[],\"mappings\":\"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\"}",
  "dts": {
    "name": "D:/widgets/LayaDataStructuresAlgorithms/.rpt2_cache/placeholder/laya/events/MouseManager.d.ts",
    "writeByteOrderMark": false,
    "text": "import { Event } from \"./Event\";\r\nimport { Sprite } from \"../display/Sprite\";\r\nimport { Stage } from \"../display/Stage\";\r\nexport declare class MouseManager {\r\n    static instance: MouseManager;\r\n    static enabled: boolean;\r\n    static multiTouchEnabled: boolean;\r\n    mouseX: number;\r\n    mouseY: number;\r\n    disableMouseEvent: boolean;\r\n    mouseDownTime: number;\r\n    mouseMoveAccuracy: number;\r\n    private static _isTouchRespond;\r\n    _event: Event;\r\n    private _stage;\r\n    private _captureSp;\r\n    private _captureChain;\r\n    private _captureExlusiveMode;\r\n    private _hitCaputreSp;\r\n    private _point;\r\n    private _rect;\r\n    private _target;\r\n    private _lastMoveTimer;\r\n    private _isLeftMouse;\r\n    private _prePoint;\r\n    private _touchIDs;\r\n    private _curTouchID;\r\n    private _id;\r\n    private static _isFirstTouch;\r\n    __init__(stage: Stage, canvas: any): void;\r\n    private _tTouchID;\r\n    private initEvent;\r\n    private checkMouseWheel;\r\n    private onMouseMove;\r\n    private onMouseDown;\r\n    private onMouseUp;\r\n    private check;\r\n    private hitTest;\r\n    private _checkAllBaseUI;\r\n    check3DUI(mousex: number, mousey: number, callback: Function): boolean;\r\n    handleExclusiveCapture(mousex: number, mousey: number, callback: Function): boolean;\r\n    handleCapture(mousex: number, mousey: number, callback: Function): boolean;\r\n    runEvent(evt: any): void;\r\n    setCapture(sp: Sprite, exclusive?: boolean): void;\r\n    releaseCapture(): void;\r\n}\r\n"
  }
}
