{
  "code": "import { Pool } from \"./Pool\";\r\nimport { Const } from \"../Const\";\r\nimport { Component } from \"../components/Component\";\r\nimport { FrameAnimation } from \"../display/FrameAnimation\";\r\nimport { Node } from \"../display/Node\";\r\nimport { WeakObject } from './WeakObject';\r\nexport class SceneUtils {\r\n    static __init() {\r\n        SceneUtils._funMap = new WeakObject();\r\n    }\r\n    static getBindFun(value) {\r\n        var fun = SceneUtils._funMap.get(value);\r\n        if (fun == null) {\r\n            var temp = \"\\\"\" + value + \"\\\"\";\r\n            temp = temp.replace(/^\"\\${|}\"$/g, \"\").replace(/\\${/g, \"\\\"+\").replace(/}/g, \"+\\\"\");\r\n            var str = \"(function(data){if(data==null)return;with(data){try{\\nreturn \" + temp + \"\\n}catch(e){}}})\";\r\n            fun = window.Laya._runScript(str);\r\n            SceneUtils._funMap.set(value, fun);\r\n        }\r\n        return fun;\r\n    }\r\n    static createByData(root, uiView) {\r\n        var tInitTool = InitTool.create();\r\n        root = SceneUtils.createComp(uiView, root, root, null, tInitTool);\r\n        root._setBit(Const.NOT_READY, true);\r\n        if (\"_idMap\" in root) {\r\n            root[\"_idMap\"] = tInitTool._idMap;\r\n        }\r\n        if (uiView.animations) {\r\n            var anilist = [];\r\n            var animations = uiView.animations;\r\n            var i, len = animations.length;\r\n            var tAni;\r\n            var tAniO;\r\n            for (i = 0; i < len; i++) {\r\n                tAni = new FrameAnimation();\r\n                tAniO = animations[i];\r\n                tAni._setUp(tInitTool._idMap, tAniO);\r\n                root[tAniO.name] = tAni;\r\n                tAni._setControlNode(root);\r\n                switch (tAniO.action) {\r\n                    case 1:\r\n                        tAni.play(0, false);\r\n                        break;\r\n                    case 2:\r\n                        tAni.play(0, true);\r\n                        break;\r\n                }\r\n                anilist.push(tAni);\r\n            }\r\n            root._aniList = anilist;\r\n        }\r\n        if (root._$componentType === \"Scene\" && root._width > 0 && uiView.props.hitTestPrior == null && !root.mouseThrough)\r\n            root.hitTestPrior = true;\r\n        tInitTool.beginLoad(root);\r\n        return root;\r\n    }\r\n    static createInitTool() {\r\n        return InitTool.create();\r\n    }\r\n    static createComp(uiView, comp = null, view = null, dataMap = null, initTool = null) {\r\n        if (uiView.type == \"Scene3D\" || uiView.type == \"Sprite3D\") {\r\n            var outBatchSprits = [];\r\n            var scene3D = ILaya.Laya[\"Utils3D\"]._createSceneByJsonForMaker(uiView, outBatchSprits, initTool);\r\n            if (uiView.type == \"Sprite3D\")\r\n                ILaya.Laya[\"StaticBatchManager\"].combine(scene3D, outBatchSprits);\r\n            else\r\n                ILaya.Laya[\"StaticBatchManager\"].combine(null, outBatchSprits);\r\n            return scene3D;\r\n        }\r\n        comp = comp || SceneUtils.getCompInstance(uiView);\r\n        if (!comp) {\r\n            if (uiView.props && uiView.props.runtime)\r\n                console.warn(\"runtime not found:\" + uiView.props.runtime);\r\n            else\r\n                console.warn(\"can not create:\" + uiView.type);\r\n            return null;\r\n        }\r\n        var child = uiView.child;\r\n        if (child) {\r\n            var isList = comp[\"_$componentType\"] == \"List\";\r\n            for (var i = 0, n = child.length; i < n; i++) {\r\n                var node = child[i];\r\n                if ('itemRender' in comp && (node.props.name == \"render\" || node.props.renderType === \"render\")) {\r\n                    comp[\"itemRender\"] = node;\r\n                }\r\n                else if (node.type == \"Graphic\") {\r\n                    ILaya.ClassUtils._addGraphicsToSprite(node, comp);\r\n                }\r\n                else if (ILaya.ClassUtils._isDrawType(node.type)) {\r\n                    ILaya.ClassUtils._addGraphicToSprite(node, comp, true);\r\n                }\r\n                else {\r\n                    if (isList) {\r\n                        var arr = [];\r\n                        var tChild = SceneUtils.createComp(node, null, view, arr, initTool);\r\n                        if (arr.length)\r\n                            tChild[\"_$bindData\"] = arr;\r\n                    }\r\n                    else {\r\n                        tChild = SceneUtils.createComp(node, null, view, dataMap, initTool);\r\n                    }\r\n                    if (node.type == \"Script\") {\r\n                        if (tChild instanceof Component) {\r\n                            comp._addComponentInstance(tChild);\r\n                        }\r\n                        else {\r\n                            if (\"owner\" in tChild) {\r\n                                tChild[\"owner\"] = comp;\r\n                            }\r\n                            else if (\"target\" in tChild) {\r\n                                tChild[\"target\"] = comp;\r\n                            }\r\n                        }\r\n                    }\r\n                    else if (node.props.renderType == \"mask\" || node.props.name == \"mask\") {\r\n                        comp.mask = tChild;\r\n                    }\r\n                    else {\r\n                        tChild instanceof Node && comp.addChild(tChild);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        var props = uiView.props;\r\n        for (var prop in props) {\r\n            var value = props[prop];\r\n            if (typeof (value) == 'string' && (value.indexOf(\"@node:\") >= 0 || value.indexOf(\"@Prefab:\") >= 0)) {\r\n                if (initTool) {\r\n                    initTool.addNodeRef(comp, prop, value);\r\n                }\r\n            }\r\n            else\r\n                SceneUtils.setCompValue(comp, prop, value, view, dataMap);\r\n        }\r\n        if (comp._afterInited) {\r\n            comp._afterInited();\r\n        }\r\n        if (uiView.compId && initTool && initTool._idMap) {\r\n            initTool._idMap[uiView.compId] = comp;\r\n        }\r\n        return comp;\r\n    }\r\n    static setCompValue(comp, prop, value, view = null, dataMap = null) {\r\n        if (typeof (value) == 'string' && value.indexOf(\"${\") > -1) {\r\n            SceneUtils._sheet || (SceneUtils._sheet = ILaya.ClassUtils.getClass(\"laya.data.Table\"));\r\n            if (!SceneUtils._sheet) {\r\n                console.warn(\"Can not find class Sheet\");\r\n                return;\r\n            }\r\n            if (dataMap) {\r\n                dataMap.push(comp, prop, value);\r\n            }\r\n            else if (view) {\r\n                if (value.indexOf(\"].\") == -1) {\r\n                    value = value.replace(\".\", \"[0].\");\r\n                }\r\n                var watcher = new DataWatcher(comp, prop, value);\r\n                watcher.exe(view);\r\n                var one, temp;\r\n                var str = value.replace(/\\[.*?\\]\\./g, \".\");\r\n                while ((one = SceneUtils._parseWatchData.exec(str)) != null) {\r\n                    var key1 = one[1];\r\n                    while ((temp = SceneUtils._parseKeyWord.exec(key1)) != null) {\r\n                        var key2 = temp[0];\r\n                        var arr = (view._watchMap[key2] || (view._watchMap[key2] = []));\r\n                        arr.push(watcher);\r\n                        SceneUtils._sheet.I.notifer.on(key2, view, view.changeData, [key2]);\r\n                    }\r\n                    arr = (view._watchMap[key1] || (view._watchMap[key1] = []));\r\n                    arr.push(watcher);\r\n                    SceneUtils._sheet.I.notifer.on(key1, view, view.changeData, [key1]);\r\n                }\r\n            }\r\n            return;\r\n        }\r\n        if (prop === \"var\" && view) {\r\n            view[value] = comp;\r\n        }\r\n        else {\r\n            comp[prop] = (value === \"true\" ? true : (value === \"false\" ? false : value));\r\n        }\r\n    }\r\n    static getCompInstance(json) {\r\n        if (json.type == \"UIView\") {\r\n            if (json.props && json.props.pageData) {\r\n                return SceneUtils.createByData(null, json.props.pageData);\r\n            }\r\n        }\r\n        var runtime = (json.props && json.props.runtime) || json.type;\r\n        var compClass = ILaya.ClassUtils.getClass(runtime);\r\n        if (!compClass)\r\n            throw \"Can not find class \" + runtime;\r\n        if (json.type === \"Script\" && compClass.prototype._doAwake) {\r\n            var comp = Pool.createByClass(compClass);\r\n            comp._destroyed = false;\r\n            return comp;\r\n        }\r\n        if (json.props && \"renderType\" in json.props && json.props[\"renderType\"] == \"instance\") {\r\n            if (!compClass[\"instance\"])\r\n                compClass[\"instance\"] = new compClass();\r\n            return compClass[\"instance\"];\r\n        }\r\n        return new compClass();\r\n    }\r\n}\r\nSceneUtils._parseWatchData = /\\${(.*?)}/g;\r\nSceneUtils._parseKeyWord = /[a-zA-Z_][a-zA-Z0-9_]*(?:(?:\\.[a-zA-Z_][a-zA-Z0-9_]*)+)/g;\r\nimport { Loader } from \"../net/Loader\";\r\nimport { Handler } from \"./Handler\";\r\nimport { ILaya } from \"../../ILaya\";\r\nclass DataWatcher {\r\n    constructor(comp, prop, value) {\r\n        this.comp = comp;\r\n        this.prop = prop;\r\n        this.value = value;\r\n    }\r\n    exe(view) {\r\n        var fun = SceneUtils.getBindFun(this.value);\r\n        this.comp[this.prop] = fun.call(this, view);\r\n    }\r\n}\r\nclass InitTool {\r\n    reset() {\r\n        this._nodeRefList = null;\r\n        this._initList = null;\r\n        this._idMap = null;\r\n        this._loadList = null;\r\n        this._scene = null;\r\n    }\r\n    recover() {\r\n        this.reset();\r\n        Pool.recover(\"InitTool\", this);\r\n    }\r\n    static create() {\r\n        var tool = Pool.getItemByClass(\"InitTool\", InitTool);\r\n        tool._idMap = [];\r\n        return tool;\r\n    }\r\n    addLoadRes(url, type = null) {\r\n        if (!this._loadList)\r\n            this._loadList = [];\r\n        if (!type) {\r\n            this._loadList.push(url);\r\n        }\r\n        else {\r\n            this._loadList.push({ url: url, type: type });\r\n        }\r\n    }\r\n    addNodeRef(node, prop, referStr) {\r\n        if (!this._nodeRefList)\r\n            this._nodeRefList = [];\r\n        this._nodeRefList.push([node, prop, referStr]);\r\n        if (referStr.indexOf(\"@Prefab:\") >= 0) {\r\n            this.addLoadRes(referStr.replace(\"@Prefab:\", \"\"), Loader.PREFAB);\r\n        }\r\n    }\r\n    setNodeRef() {\r\n        if (!this._nodeRefList)\r\n            return;\r\n        if (!this._idMap) {\r\n            this._nodeRefList = null;\r\n            return;\r\n        }\r\n        var i, len;\r\n        len = this._nodeRefList.length;\r\n        var tRefInfo;\r\n        for (i = 0; i < len; i++) {\r\n            tRefInfo = this._nodeRefList[i];\r\n            tRefInfo[0][tRefInfo[1]] = this.getReferData(tRefInfo[2]);\r\n        }\r\n        this._nodeRefList = null;\r\n    }\r\n    getReferData(referStr) {\r\n        if (referStr.indexOf(\"@Prefab:\") >= 0) {\r\n            var prefab;\r\n            prefab = Loader.getRes(referStr.replace(\"@Prefab:\", \"\"));\r\n            return prefab;\r\n        }\r\n        else if (referStr.indexOf(\"@arr:\") >= 0) {\r\n            referStr = referStr.replace(\"@arr:\", \"\");\r\n            var list;\r\n            list = referStr.split(\",\");\r\n            var i, len;\r\n            var tStr;\r\n            len = list.length;\r\n            for (i = 0; i < len; i++) {\r\n                tStr = list[i];\r\n                if (tStr) {\r\n                    list[i] = this._idMap[tStr.replace(\"@node:\", \"\")];\r\n                }\r\n                else {\r\n                    list[i] = null;\r\n                }\r\n            }\r\n            return list;\r\n        }\r\n        else {\r\n            return this._idMap[referStr.replace(\"@node:\", \"\")];\r\n        }\r\n    }\r\n    addInitItem(item) {\r\n        if (!this._initList)\r\n            this._initList = [];\r\n        this._initList.push(item);\r\n    }\r\n    doInits() {\r\n        if (!this._initList)\r\n            return;\r\n        this._initList = null;\r\n    }\r\n    finish() {\r\n        this.setNodeRef();\r\n        this.doInits();\r\n        this._scene._setBit(Const.NOT_READY, false);\r\n        if (this._scene.parent && this._scene.parent.activeInHierarchy && this._scene.active)\r\n            this._scene._processActive();\r\n        this._scene.event(\"onViewCreated\");\r\n        this.recover();\r\n    }\r\n    beginLoad(scene) {\r\n        this._scene = scene;\r\n        if (!this._loadList || this._loadList.length < 1) {\r\n            this.finish();\r\n        }\r\n        else {\r\n            ILaya.loader.load(this._loadList, Handler.create(this, this.finish));\r\n        }\r\n    }\r\n}\r\n//# sourceMappingURL=SceneUtils.js.map",
  "references": [
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/utils/Pool.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/Const.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/components/Component.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/display/FrameAnimation.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/display/Node.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/utils/WeakObject.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/components/Prefab.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/display/Scene.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/net/Loader.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/utils/Handler.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/net/LoaderManager.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/ILaya.ts"
  ],
  "map": "{\"version\":3,\"file\":\"SceneUtils.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../libs/laya/utils/SceneUtils.ts\"],\"names\":[],\"mappings\":\"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\"}",
  "dts": {
    "name": "D:/widgets/LayaDataStructuresAlgorithms/.rpt2_cache/placeholder/laya/utils/SceneUtils.d.ts",
    "writeByteOrderMark": false,
    "text": "export declare class SceneUtils {\r\n    private static _funMap;\r\n    private static _parseWatchData;\r\n    private static _parseKeyWord;\r\n    static _sheet: any;\r\n    static __init(): void;\r\n    static getBindFun(value: string): Function;\r\n    static createByData(root: any, uiView: any): any;\r\n    static createInitTool(): InitTool;\r\n    static createComp(uiView: any, comp?: any, view?: any, dataMap?: any[], initTool?: InitTool): any;\r\n    private static setCompValue;\r\n    static getCompInstance(json: any): any;\r\n}\r\nimport { Scene } from \"../display/Scene\";\r\ndeclare class InitTool {\r\n    private _nodeRefList;\r\n    private _initList;\r\n    private _loadList;\r\n    _idMap: any[];\r\n    _scene: Scene;\r\n    reset(): void;\r\n    recover(): void;\r\n    static create(): InitTool;\r\n    addLoadRes(url: string, type?: string): void;\r\n    addNodeRef(node: any, prop: string, referStr: string): void;\r\n    setNodeRef(): void;\r\n    getReferData(referStr: string): any;\r\n    addInitItem(item: any): void;\r\n    doInits(): void;\r\n    finish(): void;\r\n    beginLoad(scene: Scene): void;\r\n}\r\nexport {};\r\n"
  }
}
