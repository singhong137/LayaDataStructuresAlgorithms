{
  "code": "import { Shader } from \"../../Shader\";\r\nimport { Shader2X } from \"../Shader2X\";\r\nimport { ShaderDefines2D } from \"../ShaderDefines2D\";\r\nimport { RenderState2D } from \"../../../utils/RenderState2D\";\r\nimport { ILaya } from \"../../../../../ILaya\";\r\nexport class Value2D {\r\n    constructor(mainID, subID) {\r\n        this.defines = new ShaderDefines2D();\r\n        this.size = [0, 0];\r\n        this.alpha = 1.0;\r\n        this.ALPHA = 1.0;\r\n        this.subID = 0;\r\n        this.ref = 1;\r\n        this._cacheID = 0;\r\n        this.clipMatDir = [ILaya.Context._MAXSIZE, 0, 0, ILaya.Context._MAXSIZE];\r\n        this.clipMatPos = [0, 0];\r\n        this.clipOff = [0, 0];\r\n        this.mainID = mainID;\r\n        this.subID = subID;\r\n        this.textureHost = null;\r\n        this.texture = null;\r\n        this.color = null;\r\n        this.colorAdd = null;\r\n        this.u_mmat2 = null;\r\n        this._cacheID = mainID | subID;\r\n        this._inClassCache = Value2D._cache[this._cacheID];\r\n        if (mainID > 0 && !this._inClassCache) {\r\n            this._inClassCache = Value2D._cache[this._cacheID] = [];\r\n            this._inClassCache._length = 0;\r\n        }\r\n        this.clear();\r\n    }\r\n    static _initone(type, classT) {\r\n        Value2D._typeClass[type] = classT;\r\n        Value2D._cache[type] = [];\r\n        Value2D._cache[type]._length = 0;\r\n    }\r\n    static __init__() {\r\n    }\r\n    setValue(value) { }\r\n    _ShaderWithCompile() {\r\n        var ret = Shader.withCompile2D(0, this.mainID, this.defines.toNameDic(), this.mainID | this.defines._value, Shader2X.create, this._attribLocation);\r\n        return ret;\r\n    }\r\n    upload() {\r\n        var renderstate2d = RenderState2D;\r\n        RenderState2D.worldMatrix4 === RenderState2D.TEMPMAT4_ARRAY || this.defines.addInt(ShaderDefines2D.WORLDMAT);\r\n        this.mmat = renderstate2d.worldMatrix4;\r\n        if (RenderState2D.matWVP) {\r\n            this.defines.addInt(ShaderDefines2D.MVP3D);\r\n            this.u_MvpMatrix = RenderState2D.matWVP.elements;\r\n        }\r\n        var sd = Shader.sharders[this.mainID | this.defines._value] || this._ShaderWithCompile();\r\n        if (sd._shaderValueWidth !== renderstate2d.width || sd._shaderValueHeight !== renderstate2d.height) {\r\n            this.size[0] = renderstate2d.width;\r\n            this.size[1] = renderstate2d.height;\r\n            sd._shaderValueWidth = renderstate2d.width;\r\n            sd._shaderValueHeight = renderstate2d.height;\r\n            sd.upload(this, null);\r\n        }\r\n        else {\r\n            sd.upload(this, sd._params2dQuick2 || sd._make2dQuick2());\r\n        }\r\n    }\r\n    setFilters(value) {\r\n        this.filters = value;\r\n        if (!value)\r\n            return;\r\n        var n = value.length, f;\r\n        for (var i = 0; i < n; i++) {\r\n            f = value[i];\r\n            if (f) {\r\n                this.defines.add(f.type);\r\n                f.action.setValue(this);\r\n            }\r\n        }\r\n    }\r\n    clear() {\r\n        this.defines._value = this.subID;\r\n        this.clipOff[0] = 0;\r\n    }\r\n    release() {\r\n        if ((--this.ref) < 1) {\r\n            this._inClassCache && (this._inClassCache[this._inClassCache._length++] = this);\r\n            this.clear();\r\n            this.filters = null;\r\n            this.ref = 1;\r\n            this.clipOff[0] = 0;\r\n        }\r\n    }\r\n    static create(mainType, subType) {\r\n        var types = Value2D._cache[mainType | subType];\r\n        if (types._length)\r\n            return types[--types._length];\r\n        else\r\n            return new Value2D._typeClass[mainType | subType](subType);\r\n    }\r\n}\r\nValue2D._cache = [];\r\nValue2D._typeClass = [];\r\nValue2D.TEMPMAT4_ARRAY = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\r\n//# sourceMappingURL=Value2D.js.map",
  "references": [
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/resource/Texture.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/webgl/shader/Shader.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/webgl/shader/ShaderValue.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/webgl/shader/d2/Shader2D.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/webgl/shader/d2/Shader2X.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/webgl/shader/d2/ShaderDefines2D.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/webgl/utils/RenderState2D.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/ILaya.ts"
  ],
  "map": "{\"version\":3,\"file\":\"Value2D.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../../libs/laya/webgl/shader/d2/value/Value2D.ts\"],\"names\":[],\"mappings\":\"AACC,OAAO,EAAE,MAAM,EAAE,MAAM,cAAc,CAAA;AAGrC,OAAO,EAAE,QAAQ,EAAE,MAAM,aAAa,CAAA;AACtC,OAAO,EAAE,eAAe,EAAE,MAAM,oBAAoB,CAAA;AACpD,OAAO,EAAE,aAAa,EAAE,MAAM,8BAA8B,CAAA;AAC7D,OAAO,EAAE,KAAK,EAAE,MAAM,sBAAsB,CAAC;AAE5C,MAAM,OAAO,OAAO;IAmDnB,YAAY,MAAa,EAAC,KAAY;QAjCrC,YAAO,GAAmB,IAAI,eAAe,EAAE,CAAC;QAEhD,SAAI,GAAS,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;QAEpB,UAAK,GAAU,GAAG,CAAC;QAKnB,UAAK,GAAU,GAAG,CAAC;QAInB,UAAK,GAAQ,CAAC,CAAC;QASf,QAAG,GAAU,CAAC,CAAC;QAIR,aAAQ,GAAU,CAAC,CAAC;QAC3B,eAAU,GAAS,CAAC,KAAK,CAAC,OAAO,CAAC,QAAQ,EAAE,CAAC,EAAE,CAAC,EAAE,KAAK,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;QAC1E,eAAU,GAAS,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;QAC1B,YAAO,GAAS,CAAC,CAAC,EAAC,CAAC,CAAC,CAAC;QAKtB,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;QACrB,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;QAEnB,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;QACxB,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;QAEpB,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;QAElB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;QACrB,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;QAEpB,IAAI,CAAC,QAAQ,GAAG,MAAM,GAAC,KAAK,CAAC;QAC7B,IAAI,CAAC,aAAa,GAAG,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QACnD,IAAI,MAAM,GAAC,CAAC,IAAI,CAAC,IAAI,CAAC,aAAa,EACnC;YACC,IAAI,CAAC,aAAa,GAAG,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,GAAG,EAAE,CAAC;YACxD,IAAI,CAAC,aAAa,CAAC,OAAO,GAAG,CAAC,CAAC;SAC/B;QACD,IAAI,CAAC,KAAK,EAAE,CAAC;IAEd,CAAC;IAhEM,MAAM,CAAC,QAAQ,CAAC,IAAW,EAAE,MAAU;QAE7C,OAAO,CAAC,UAAU,CAAC,IAAI,CAAC,GAAG,MAAM,CAAC;QAClC,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC;QAC1B,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,OAAO,GAAG,CAAC,CAAC;IAClC,CAAC;IAEA,MAAM,CAAC,QAAQ;IAChB,CAAC;IA0DA,QAAQ,CAAC,KAAc,IAAO,CAAC;IAMxB,kBAAkB;QAEzB,IAAI,GAAG,GAAwB,MAAM,CAAC,aAAa,CAAC,CAAC,EAAE,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,EAAE,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE,QAAQ,CAAC,MAAM,EAAE,IAAI,CAAC,eAAe,CAAG,CAAC;QAE1K,OAAO,GAAG,CAAC;IACZ,CAAC;IAEA,MAAM;QACN,IAAI,aAAa,GAAM,aAAa,CAAC;QAGrC,aAAa,CAAC,YAAY,KAAK,aAAa,CAAC,cAAc,IAAK,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,eAAe,CAAC,QAAQ,CAAC,CAAC;QAC9G,IAAI,CAAC,IAAI,GAAG,aAAa,CAAC,YAAY,CAAC;QAEvC,IAAI,aAAa,CAAC,MAAM,EAAE;YACzB,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,eAAe,CAAC,KAAK,CAAC,CAAC;YAC3C,IAAI,CAAC,WAAW,GAAG,aAAa,CAAC,MAAM,CAAC,QAAQ,CAAC;SACjD;QAED,IAAI,EAAE,GAAY,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,IAAI,CAAC,kBAAkB,EAAE,CAAC;QAElG,IAAI,EAAE,CAAC,iBAAiB,KAAM,aAAa,CAAC,KAAK,IAAK,EAAE,CAAC,kBAAkB,KAAK,aAAa,CAAC,MAAM,EAAC;YACpG,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,aAAa,CAAC,KAAK,CAAC;YACnC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,aAAa,CAAC,MAAM,CAAC;YACpC,EAAE,CAAC,iBAAiB,GAAI,aAAa,CAAC,KAAK,CAAC;YAC5C,EAAE,CAAC,kBAAkB,GAAG,aAAa,CAAC,MAAM,CAAC;YAC7C,EAAE,CAAC,MAAM,CAAe,IAAM,EAAE,IAAI,CAAC,CAAC;SACtC;aACG;YACH,EAAE,CAAC,MAAM,CAAe,IAAM,EAAE,EAAE,CAAC,eAAe,IAAI,EAAE,CAAC,aAAa,EAAE,CAAC,CAAC;SAC1E;IACF,CAAC;IAGA,UAAU,CAAC,KAAW;QAEtB,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;QACrB,IAAI,CAAC,KAAK;YACT,OAAO;QAER,IAAI,CAAC,GAAU,KAAK,CAAC,MAAM,EAAE,CAAK,CAAC;QACnC,KAAK,IAAI,CAAC,GAAU,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,EACjC;YACC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;YACb,IAAI,CAAC,EACL;gBACC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;gBACzB,CAAC,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;aACxB;SACD;IACF,CAAC;IAEA,KAAK;QAEL,IAAI,CAAC,OAAO,CAAC,MAAM,GAAC,IAAI,CAAC,KAAK,CAAC;QAC/B,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;IACrB,CAAC;IAEA,OAAO;QAEP,IAAK,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,GAAE,CAAC,EACpB;YACC,IAAI,CAAC,aAAa,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,aAAa,CAAC,OAAO,EAAE,CAAC,GAAG,IAAI,CAAC,CAAC;YAGhF,IAAI,CAAC,KAAK,EAAE,CAAC;YACb,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;YACpB,IAAI,CAAC,GAAG,GAAG,CAAC,CAAC;YACb,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;SACpB;IACF,CAAC;IAEA,MAAM,CAAC,MAAM,CAAC,QAAe,EAAC,OAAc;QAE5C,IAAI,KAAK,GAAO,OAAO,CAAC,MAAM,CAAC,QAAQ,GAAC,OAAO,CAAC,CAAC;QACjD,IAAI,KAAK,CAAC,OAAO;YAChB,OAAO,KAAK,CAAC,EAAE,KAAK,CAAC,OAAO,CAAC,CAAC;;YAE9B,OAAO,IAAI,OAAO,CAAC,UAAU,CAAC,QAAQ,GAAC,OAAO,CAAC,CAAC,OAAO,CAAC,CAAC;IAC3D,CAAC;;AA5JgB,cAAM,GAAO,EAAE,CAAC;AAChB,kBAAU,GAAO,EAAE,CAAC;AAE7B,sBAAc,GAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC\"}",
  "dts": {
    "name": "D:/widgets/LayaDataStructuresAlgorithms/.rpt2_cache/placeholder/laya/webgl/shader/d2/value/Value2D.d.ts",
    "writeByteOrderMark": false,
    "text": "import { Texture } from \"../../../../resource/Texture\";\r\nimport { Shader } from \"../../Shader\";\r\nimport { Shader2D } from \"../Shader2D\";\r\nimport { ShaderDefines2D } from \"../ShaderDefines2D\";\r\nexport declare class Value2D {\r\n    protected static _cache: any[];\r\n    protected static _typeClass: any;\r\n    static TEMPMAT4_ARRAY: any[];\r\n    static _initone(type: number, classT: any): void;\r\n    static __init__(): void;\r\n    defines: ShaderDefines2D;\r\n    size: any[];\r\n    alpha: number;\r\n    mmat: any[];\r\n    u_MvpMatrix: any[];\r\n    texture: any;\r\n    ALPHA: number;\r\n    shader: Shader;\r\n    mainID: number;\r\n    subID: number;\r\n    filters: any[];\r\n    textureHost: Texture;\r\n    color: any[];\r\n    colorAdd: any[];\r\n    u_mmat2: any[];\r\n    ref: number;\r\n    protected _attribLocation: any[];\r\n    private _inClassCache;\r\n    private _cacheID;\r\n    clipMatDir: any[];\r\n    clipMatPos: any[];\r\n    clipOff: any[];\r\n    constructor(mainID: number, subID: number);\r\n    setValue(value: Shader2D): void;\r\n    private _ShaderWithCompile;\r\n    upload(): void;\r\n    setFilters(value: any[]): void;\r\n    clear(): void;\r\n    release(): void;\r\n    static create(mainType: number, subType: number): Value2D;\r\n}\r\n"
  }
}
