{
  "code": "import { Sprite } from \"./Sprite\";\r\nimport { Config } from \"./../../Config\";\r\nimport { Input } from \"./Input\";\r\nimport { SpriteConst } from \"./SpriteConst\";\r\nimport { Const } from \"../Const\";\r\nimport { Event } from \"../events/Event\";\r\nimport { MouseManager } from \"../events/MouseManager\";\r\nimport { Matrix } from \"../maths/Matrix\";\r\nimport { Point } from \"../maths/Point\";\r\nimport { Render } from \"../renders/Render\";\r\nimport { RenderInfo } from \"../renders/RenderInfo\";\r\nimport { Context } from \"../resource/Context\";\r\nimport { Browser } from \"../utils/Browser\";\r\nimport { CallLater } from \"../utils/CallLater\";\r\nimport { ColorUtils } from \"../utils/ColorUtils\";\r\nimport { RunDriver } from \"../utils/RunDriver\";\r\nimport { VectorGraphManager } from \"../utils/VectorGraphManager\";\r\nimport { RenderState2D } from \"../webgl/utils/RenderState2D\";\r\nimport { Stat } from \"../utils/Stat\";\r\nimport { ILaya } from \"../../ILaya\";\r\nimport { LayaGL } from \"../layagl/LayaGL\";\r\nimport { ClassUtils } from \"../utils/ClassUtils\";\r\nexport class Stage extends Sprite {\r\n    constructor() {\r\n        super();\r\n        this.offset = new Point();\r\n        this._frameRate = \"fast\";\r\n        this.designWidth = 0;\r\n        this.designHeight = 0;\r\n        this.canvasRotation = false;\r\n        this.canvasDegree = 0;\r\n        this.renderingEnabled = true;\r\n        this.screenAdaptationEnabled = true;\r\n        this._canvasTransform = new Matrix();\r\n        this._screenMode = \"none\";\r\n        this._scaleMode = \"noscale\";\r\n        this._alignV = \"top\";\r\n        this._alignH = \"left\";\r\n        this._bgColor = \"black\";\r\n        this._mouseMoveTime = 0;\r\n        this._renderCount = 0;\r\n        this._safariOffsetY = 0;\r\n        this._frameStartTime = 0;\r\n        this._previousOrientation = Browser.window.orientation;\r\n        this._wgColor = [0, 0, 0, 1];\r\n        this._scene3Ds = [];\r\n        this._globalRepaintSet = false;\r\n        this._globalRepaintGet = false;\r\n        this._3dUI = [];\r\n        this._curUIBase = null;\r\n        this.useRetinalCanvas = false;\r\n        super.set_transform(this._createTransform());\r\n        this.mouseEnabled = true;\r\n        this.hitTestPrior = true;\r\n        this.autoSize = false;\r\n        this._setBit(Const.DISPLAYED_INSTAGE, true);\r\n        this._setBit(Const.ACTIVE_INHIERARCHY, true);\r\n        this._isFocused = true;\r\n        this._isVisibility = true;\r\n        this.useRetinalCanvas = Config.useRetinalCanvas;\r\n        var window = Browser.window;\r\n        window.addEventListener(\"focus\", () => {\r\n            this._isFocused = true;\r\n            this.event(Event.FOCUS);\r\n            this.event(Event.FOCUS_CHANGE);\r\n        });\r\n        window.addEventListener(\"blur\", () => {\r\n            this._isFocused = false;\r\n            this.event(Event.BLUR);\r\n            this.event(Event.FOCUS_CHANGE);\r\n            if (this._isInputting())\r\n                Input[\"inputElement\"].target.focus = false;\r\n        });\r\n        var state = \"visibilityState\", visibilityChange = \"visibilitychange\";\r\n        var document = window.document;\r\n        if (typeof document.hidden !== \"undefined\") {\r\n            visibilityChange = \"visibilitychange\";\r\n            state = \"visibilityState\";\r\n        }\r\n        else if (typeof document.mozHidden !== \"undefined\") {\r\n            visibilityChange = \"mozvisibilitychange\";\r\n            state = \"mozVisibilityState\";\r\n        }\r\n        else if (typeof document.msHidden !== \"undefined\") {\r\n            visibilityChange = \"msvisibilitychange\";\r\n            state = \"msVisibilityState\";\r\n        }\r\n        else if (typeof document.webkitHidden !== \"undefined\") {\r\n            visibilityChange = \"webkitvisibilitychange\";\r\n            state = \"webkitVisibilityState\";\r\n        }\r\n        window.document.addEventListener(visibilityChange, () => {\r\n            if (Browser.document[state] == \"hidden\") {\r\n                this._isVisibility = false;\r\n                if (this._isInputting())\r\n                    Input[\"inputElement\"].target.focus = false;\r\n            }\r\n            else {\r\n                this._isVisibility = true;\r\n            }\r\n            this.renderingEnabled = this._isVisibility;\r\n            this.event(Event.VISIBILITY_CHANGE);\r\n        });\r\n        window.addEventListener(\"resize\", () => {\r\n            var orientation = Browser.window.orientation;\r\n            if (orientation != null && orientation != this._previousOrientation && this._isInputting()) {\r\n                Input[\"inputElement\"].target.focus = false;\r\n            }\r\n            this._previousOrientation = orientation;\r\n            if (this._isInputting())\r\n                return;\r\n            if (Browser.onSafari)\r\n                this._safariOffsetY = (Browser.window.__innerHeight || Browser.document.body.clientHeight || Browser.document.documentElement.clientHeight) - Browser.window.innerHeight;\r\n            this._resetCanvas();\r\n        });\r\n        window.addEventListener(\"orientationchange\", (e) => {\r\n            this._resetCanvas();\r\n        });\r\n        this.on(Event.MOUSE_MOVE, this, this._onmouseMove);\r\n        if (Browser.onMobile)\r\n            this.on(Event.MOUSE_DOWN, this, this._onmouseMove);\r\n    }\r\n    _isInputting() {\r\n        return (Browser.onMobile && Input.isInputting);\r\n    }\r\n    set width(value) {\r\n        this.designWidth = value;\r\n        super.set_width(value);\r\n        ILaya.systemTimer.callLater(this, this._changeCanvasSize);\r\n    }\r\n    get width() {\r\n        return super.get_width();\r\n    }\r\n    set height(value) {\r\n        this.designHeight = value;\r\n        super.set_height(value);\r\n        ILaya.systemTimer.callLater(this, this._changeCanvasSize);\r\n    }\r\n    get height() {\r\n        return super.get_height();\r\n    }\r\n    set transform(value) {\r\n        super.set_transform(value);\r\n    }\r\n    get transform() {\r\n        if (this._tfChanged)\r\n            this._adjustTransform();\r\n        return (this._transform = this._transform || this._createTransform());\r\n    }\r\n    get isFocused() {\r\n        return this._isFocused;\r\n    }\r\n    get isVisibility() {\r\n        return this._isVisibility;\r\n    }\r\n    _changeCanvasSize() {\r\n        this.setScreenSize(Browser.clientWidth * Browser.pixelRatio, Browser.clientHeight * Browser.pixelRatio);\r\n    }\r\n    _resetCanvas() {\r\n        if (!this.screenAdaptationEnabled)\r\n            return;\r\n        this._changeCanvasSize();\r\n    }\r\n    setScreenSize(screenWidth, screenHeight) {\r\n        var rotation = false;\r\n        if (this._screenMode !== Stage.SCREEN_NONE) {\r\n            var screenType = screenWidth / screenHeight < 1 ? Stage.SCREEN_VERTICAL : Stage.SCREEN_HORIZONTAL;\r\n            rotation = screenType !== this._screenMode;\r\n            if (rotation) {\r\n                var temp = screenHeight;\r\n                screenHeight = screenWidth;\r\n                screenWidth = temp;\r\n            }\r\n        }\r\n        this.canvasRotation = rotation;\r\n        var canvas = Render._mainCanvas;\r\n        var canvasStyle = canvas.source.style;\r\n        var mat = this._canvasTransform.identity();\r\n        var scaleMode = this._scaleMode;\r\n        var scaleX = screenWidth / this.designWidth;\r\n        var scaleY = screenHeight / this.designHeight;\r\n        var canvasWidth = this.useRetinalCanvas ? screenWidth : this.designWidth;\r\n        var canvasHeight = this.useRetinalCanvas ? screenHeight : this.designHeight;\r\n        var realWidth = screenWidth;\r\n        var realHeight = screenHeight;\r\n        var pixelRatio = Browser.pixelRatio;\r\n        this._width = this.designWidth;\r\n        this._height = this.designHeight;\r\n        switch (scaleMode) {\r\n            case Stage.SCALE_NOSCALE:\r\n                scaleX = scaleY = 1;\r\n                realWidth = this.designWidth;\r\n                realHeight = this.designHeight;\r\n                break;\r\n            case Stage.SCALE_SHOWALL:\r\n                scaleX = scaleY = Math.min(scaleX, scaleY);\r\n                canvasWidth = realWidth = Math.round(this.designWidth * scaleX);\r\n                canvasHeight = realHeight = Math.round(this.designHeight * scaleY);\r\n                break;\r\n            case Stage.SCALE_NOBORDER:\r\n                scaleX = scaleY = Math.max(scaleX, scaleY);\r\n                realWidth = Math.round(this.designWidth * scaleX);\r\n                realHeight = Math.round(this.designHeight * scaleY);\r\n                break;\r\n            case Stage.SCALE_FULL:\r\n                scaleX = scaleY = 1;\r\n                this._width = canvasWidth = screenWidth;\r\n                this._height = canvasHeight = screenHeight;\r\n                break;\r\n            case Stage.SCALE_FIXED_WIDTH:\r\n                scaleY = scaleX;\r\n                this._height = canvasHeight = Math.round(screenHeight / scaleX);\r\n                break;\r\n            case Stage.SCALE_FIXED_HEIGHT:\r\n                scaleX = scaleY;\r\n                this._width = canvasWidth = Math.round(screenWidth / scaleY);\r\n                break;\r\n            case Stage.SCALE_FIXED_AUTO:\r\n                if ((screenWidth / screenHeight) < (this.designWidth / this.designHeight)) {\r\n                    scaleY = scaleX;\r\n                    this._height = canvasHeight = Math.round(screenHeight / scaleX);\r\n                }\r\n                else {\r\n                    scaleX = scaleY;\r\n                    this._width = canvasWidth = Math.round(screenWidth / scaleY);\r\n                }\r\n                break;\r\n        }\r\n        if (this.useRetinalCanvas) {\r\n            realWidth = canvasWidth = screenWidth;\r\n            realHeight = canvasHeight = screenHeight;\r\n        }\r\n        scaleX *= this.scaleX;\r\n        scaleY *= this.scaleY;\r\n        if (scaleX === 1 && scaleY === 1) {\r\n            this.transform.identity();\r\n        }\r\n        else {\r\n            this.transform.a = this._formatData(scaleX / (realWidth / canvasWidth));\r\n            this.transform.d = this._formatData(scaleY / (realHeight / canvasHeight));\r\n        }\r\n        canvas.size(canvasWidth, canvasHeight);\r\n        RunDriver.changeWebGLSize(canvasWidth, canvasHeight);\r\n        mat.scale(realWidth / canvasWidth / pixelRatio, realHeight / canvasHeight / pixelRatio);\r\n        if (this._alignH === Stage.ALIGN_LEFT)\r\n            this.offset.x = 0;\r\n        else if (this._alignH === Stage.ALIGN_RIGHT)\r\n            this.offset.x = screenWidth - realWidth;\r\n        else\r\n            this.offset.x = (screenWidth - realWidth) * 0.5 / pixelRatio;\r\n        if (this._alignV === Stage.ALIGN_TOP)\r\n            this.offset.y = 0;\r\n        else if (this._alignV === Stage.ALIGN_BOTTOM)\r\n            this.offset.y = screenHeight - realHeight;\r\n        else\r\n            this.offset.y = (screenHeight - realHeight) * 0.5 / pixelRatio;\r\n        this.offset.x = Math.round(this.offset.x);\r\n        this.offset.y = Math.round(this.offset.y);\r\n        mat.translate(this.offset.x, this.offset.y);\r\n        if (this._safariOffsetY)\r\n            mat.translate(0, this._safariOffsetY);\r\n        this.canvasDegree = 0;\r\n        if (rotation) {\r\n            if (this._screenMode === Stage.SCREEN_HORIZONTAL) {\r\n                mat.rotate(Math.PI / 2);\r\n                mat.translate(screenHeight / pixelRatio, 0);\r\n                this.canvasDegree = 90;\r\n            }\r\n            else {\r\n                mat.rotate(-Math.PI / 2);\r\n                mat.translate(0, screenWidth / pixelRatio);\r\n                this.canvasDegree = -90;\r\n            }\r\n        }\r\n        mat.a = this._formatData(mat.a);\r\n        mat.d = this._formatData(mat.d);\r\n        mat.tx = this._formatData(mat.tx);\r\n        mat.ty = this._formatData(mat.ty);\r\n        super.set_transform(this.transform);\r\n        canvasStyle.transformOrigin = canvasStyle.webkitTransformOrigin = canvasStyle.msTransformOrigin = canvasStyle.mozTransformOrigin = canvasStyle.oTransformOrigin = \"0px 0px 0px\";\r\n        canvasStyle.transform = canvasStyle.webkitTransform = canvasStyle.msTransform = canvasStyle.mozTransform = canvasStyle.oTransform = \"matrix(\" + mat.toString() + \")\";\r\n        if (this._safariOffsetY)\r\n            mat.translate(0, -this._safariOffsetY);\r\n        mat.translate(parseInt(canvasStyle.left) || 0, parseInt(canvasStyle.top) || 0);\r\n        this.visible = true;\r\n        this._repaint |= SpriteConst.REPAINT_CACHE;\r\n        this.event(Event.RESIZE);\r\n    }\r\n    _formatData(value) {\r\n        if (Math.abs(value) < 0.000001)\r\n            return 0;\r\n        if (Math.abs(1 - value) < 0.001)\r\n            return value > 0 ? 1 : -1;\r\n        return value;\r\n    }\r\n    get scaleMode() {\r\n        return this._scaleMode;\r\n    }\r\n    set scaleMode(value) {\r\n        this._scaleMode = value;\r\n        ILaya.systemTimer.callLater(this, this._changeCanvasSize);\r\n    }\r\n    get alignH() {\r\n        return this._alignH;\r\n    }\r\n    set alignH(value) {\r\n        this._alignH = value;\r\n        ILaya.systemTimer.callLater(this, this._changeCanvasSize);\r\n    }\r\n    get alignV() {\r\n        return this._alignV;\r\n    }\r\n    set alignV(value) {\r\n        this._alignV = value;\r\n        ILaya.systemTimer.callLater(this, this._changeCanvasSize);\r\n    }\r\n    get bgColor() {\r\n        return this._bgColor;\r\n    }\r\n    set bgColor(value) {\r\n        this._bgColor = value;\r\n        if (value)\r\n            this._wgColor = ColorUtils.create(value).arrColor;\r\n        else\r\n            this._wgColor = null;\r\n        if (value) {\r\n            Render.canvas.style.background = value;\r\n        }\r\n        else {\r\n            Render.canvas.style.background = \"none\";\r\n        }\r\n    }\r\n    get mouseX() {\r\n        return Math.round(MouseManager.instance.mouseX / this.clientScaleX);\r\n    }\r\n    get mouseY() {\r\n        return Math.round(MouseManager.instance.mouseY / this.clientScaleY);\r\n    }\r\n    getMousePoint() {\r\n        return Point.TEMP.setTo(this.mouseX, this.mouseY);\r\n    }\r\n    get clientScaleX() {\r\n        return this._transform ? this._transform.getScaleX() : 1;\r\n    }\r\n    get clientScaleY() {\r\n        return this._transform ? this._transform.getScaleY() : 1;\r\n    }\r\n    get screenMode() {\r\n        return this._screenMode;\r\n    }\r\n    set screenMode(value) {\r\n        this._screenMode = value;\r\n    }\r\n    repaint(type = SpriteConst.REPAINT_CACHE) {\r\n        this._repaint |= type;\r\n    }\r\n    parentRepaint(type = SpriteConst.REPAINT_CACHE) {\r\n    }\r\n    _loop() {\r\n        this._globalRepaintGet = this._globalRepaintSet;\r\n        this._globalRepaintSet = false;\r\n        this.render(Render._context, 0, 0);\r\n        return true;\r\n    }\r\n    getFrameTm() {\r\n        return this._frameStartTime;\r\n    }\r\n    _onmouseMove(e) {\r\n        this._mouseMoveTime = Browser.now();\r\n    }\r\n    getTimeFromFrameStart() {\r\n        return Browser.now() - this._frameStartTime;\r\n    }\r\n    set visible(value) {\r\n        if (this.visible !== value) {\r\n            super.set_visible(value);\r\n            var style = Render._mainCanvas.source.style;\r\n            style.visibility = value ? \"visible\" : \"hidden\";\r\n        }\r\n    }\r\n    get visible() {\r\n        return super.visible;\r\n    }\r\n    render(context, x, y) {\r\n        if (window.conch) {\r\n            this.renderToNative(context, x, y);\r\n            return;\r\n        }\r\n        if (this._frameRate === Stage.FRAME_SLEEP) {\r\n            var now = Browser.now();\r\n            if (now - this._frameStartTime >= 1000)\r\n                this._frameStartTime = now;\r\n            else\r\n                return;\r\n        }\r\n        else {\r\n            if (!this._visible) {\r\n                this._renderCount++;\r\n                if (this._renderCount % 5 === 0) {\r\n                    CallLater.I._update();\r\n                    Stat.loopCount++;\r\n                    RenderInfo.loopCount = Stat.loopCount;\r\n                    this._updateTimers();\r\n                }\r\n                return;\r\n            }\r\n            this._frameStartTime = Browser.now();\r\n            RenderInfo.loopStTm = this._frameStartTime;\r\n        }\r\n        this._renderCount++;\r\n        var frameMode = this._frameRate === Stage.FRAME_MOUSE ? (((this._frameStartTime - this._mouseMoveTime) < 2000) ? Stage.FRAME_FAST : Stage.FRAME_SLOW) : this._frameRate;\r\n        var isFastMode = (frameMode !== Stage.FRAME_SLOW);\r\n        var isDoubleLoop = (this._renderCount % 2 === 0);\r\n        Stat.renderSlow = !isFastMode;\r\n        if (!isFastMode && !isDoubleLoop)\r\n            return;\r\n        CallLater.I._update();\r\n        Stat.loopCount++;\r\n        RenderInfo.loopCount = Stat.loopCount;\r\n        if (this.renderingEnabled) {\r\n            for (var i = 0, n = this._scene3Ds.length; i < n; i++)\r\n                this._scene3Ds[i]._update();\r\n            context.clear();\r\n            super.render(context, x, y);\r\n            Stat._StatRender.renderNotCanvas(context, x, y);\r\n        }\r\n        if (this.renderingEnabled) {\r\n            Stage.clear(this._bgColor);\r\n            context.flush();\r\n            VectorGraphManager.instance && VectorGraphManager.getInstance().endDispose();\r\n        }\r\n        this._updateTimers();\r\n    }\r\n    renderToNative(context, x, y) {\r\n        this._renderCount++;\r\n        if (!this._visible) {\r\n            if (this._renderCount % 5 === 0) {\r\n                CallLater.I._update();\r\n                Stat.loopCount++;\r\n                RenderInfo.loopCount = Stat.loopCount;\r\n                this._updateTimers();\r\n            }\r\n            return;\r\n        }\r\n        CallLater.I._update();\r\n        Stat.loopCount++;\r\n        RenderInfo.loopCount = Stat.loopCount;\r\n        if (this.renderingEnabled) {\r\n            for (var i = 0, n = this._scene3Ds.length; i < n; i++)\r\n                this._scene3Ds[i]._update();\r\n            context.clear();\r\n            super.render(context, x, y);\r\n            Stat._StatRender.renderNotCanvas(context, x, y);\r\n        }\r\n        if (this.renderingEnabled) {\r\n            Stage.clear(this._bgColor);\r\n            context.flush();\r\n            VectorGraphManager.instance && VectorGraphManager.getInstance().endDispose();\r\n        }\r\n        this._updateTimers();\r\n    }\r\n    _updateTimers() {\r\n        ILaya.systemTimer._update();\r\n        ILaya.startTimer._update();\r\n        ILaya.physicsTimer._update();\r\n        ILaya.updateTimer._update();\r\n        ILaya.lateTimer._update();\r\n        ILaya.timer._update();\r\n    }\r\n    set fullScreenEnabled(value) {\r\n        var document = Browser.document;\r\n        var canvas = Render.canvas;\r\n        if (value) {\r\n            canvas.addEventListener('mousedown', this._requestFullscreen);\r\n            canvas.addEventListener('touchstart', this._requestFullscreen);\r\n            document.addEventListener(\"fullscreenchange\", this._fullScreenChanged);\r\n            document.addEventListener(\"mozfullscreenchange\", this._fullScreenChanged);\r\n            document.addEventListener(\"webkitfullscreenchange\", this._fullScreenChanged);\r\n            document.addEventListener(\"msfullscreenchange\", this._fullScreenChanged);\r\n        }\r\n        else {\r\n            canvas.removeEventListener('mousedown', this._requestFullscreen);\r\n            canvas.removeEventListener('touchstart', this._requestFullscreen);\r\n            document.removeEventListener(\"fullscreenchange\", this._fullScreenChanged);\r\n            document.removeEventListener(\"mozfullscreenchange\", this._fullScreenChanged);\r\n            document.removeEventListener(\"webkitfullscreenchange\", this._fullScreenChanged);\r\n            document.removeEventListener(\"msfullscreenchange\", this._fullScreenChanged);\r\n        }\r\n    }\r\n    get frameRate() {\r\n        if (!ILaya.Render.isConchApp) {\r\n            return this._frameRate;\r\n        }\r\n        else {\r\n            return this._frameRateNative;\r\n        }\r\n    }\r\n    set frameRate(value) {\r\n        if (!ILaya.Render.isConchApp) {\r\n            this._frameRate = value;\r\n        }\r\n        else {\r\n            var c = window.conch;\r\n            switch (value) {\r\n                case Stage.FRAME_FAST:\r\n                    c.config.setLimitFPS(60);\r\n                    break;\r\n                case Stage.FRAME_MOUSE:\r\n                    c.config.setMouseFrame(2000);\r\n                    break;\r\n                case Stage.FRAME_SLOW:\r\n                    c.config.setSlowFrame(true);\r\n                    break;\r\n                case Stage.FRAME_SLEEP:\r\n                    c.config.setLimitFPS(1);\r\n                    break;\r\n            }\r\n            this._frameRateNative = value;\r\n        }\r\n    }\r\n    _requestFullscreen() {\r\n        var element = Browser.document.documentElement;\r\n        if (element.requestFullscreen) {\r\n            element.requestFullscreen();\r\n        }\r\n        else if (element.mozRequestFullScreen) {\r\n            element.mozRequestFullScreen();\r\n        }\r\n        else if (element.webkitRequestFullscreen) {\r\n            element.webkitRequestFullscreen();\r\n        }\r\n        else if (element.msRequestFullscreen) {\r\n            element.msRequestFullscreen();\r\n        }\r\n    }\r\n    _fullScreenChanged() {\r\n        ILaya.stage.event(Event.FULL_SCREEN_CHANGE);\r\n    }\r\n    exitFullscreen() {\r\n        var document = Browser.document;\r\n        if (document.exitFullscreen) {\r\n            document.exitFullscreen();\r\n        }\r\n        else if (document.mozCancelFullScreen) {\r\n            document.mozCancelFullScreen();\r\n        }\r\n        else if (document.webkitExitFullscreen) {\r\n            document.webkitExitFullscreen();\r\n        }\r\n    }\r\n    isGlobalRepaint() {\r\n        return this._globalRepaintGet;\r\n    }\r\n    setGlobalRepaint() {\r\n        this._globalRepaintSet = true;\r\n    }\r\n    add3DUI(uibase) {\r\n        var uiroot = uibase.rootView;\r\n        if (this._3dUI.indexOf(uiroot) >= 0)\r\n            return;\r\n        this._3dUI.push(uiroot);\r\n    }\r\n    remove3DUI(uibase) {\r\n        var uiroot = uibase.rootView;\r\n        var p = this._3dUI.indexOf(uiroot);\r\n        if (p >= 0) {\r\n            this._3dUI.splice(p, 1);\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n}\r\nStage.SCALE_NOSCALE = \"noscale\";\r\nStage.SCALE_EXACTFIT = \"exactfit\";\r\nStage.SCALE_SHOWALL = \"showall\";\r\nStage.SCALE_NOBORDER = \"noborder\";\r\nStage.SCALE_FULL = \"full\";\r\nStage.SCALE_FIXED_WIDTH = \"fixedwidth\";\r\nStage.SCALE_FIXED_HEIGHT = \"fixedheight\";\r\nStage.SCALE_FIXED_AUTO = \"fixedauto\";\r\nStage.ALIGN_LEFT = \"left\";\r\nStage.ALIGN_RIGHT = \"right\";\r\nStage.ALIGN_CENTER = \"center\";\r\nStage.ALIGN_TOP = \"top\";\r\nStage.ALIGN_MIDDLE = \"middle\";\r\nStage.ALIGN_BOTTOM = \"bottom\";\r\nStage.SCREEN_NONE = \"none\";\r\nStage.SCREEN_HORIZONTAL = \"horizontal\";\r\nStage.SCREEN_VERTICAL = \"vertical\";\r\nStage.FRAME_FAST = \"fast\";\r\nStage.FRAME_SLOW = \"slow\";\r\nStage.FRAME_MOUSE = \"mouse\";\r\nStage.FRAME_SLEEP = \"sleep\";\r\nStage.clear = function (value) {\r\n    Context.set2DRenderConfig();\r\n    var gl = LayaGL.instance;\r\n    RenderState2D.worldScissorTest && gl.disable(gl.SCISSOR_TEST);\r\n    var ctx = Render.context;\r\n    var c = (ctx._submits._length == 0 || Config.preserveDrawingBuffer) ? ColorUtils.create(value).arrColor : ILaya.stage._wgColor;\r\n    if (c)\r\n        ctx.clearBG(c[0], c[1], c[2], c[3]);\r\n    else\r\n        ctx.clearBG(0, 0, 0, 0);\r\n    RenderState2D.clear();\r\n};\r\nClassUtils.regClass(\"laya.display.Stage\", Stage);\r\nClassUtils.regClass(\"Laya.Stage\", Stage);\r\n//# sourceMappingURL=Stage.js.map",
  "references": [
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/display/Sprite.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/display/Node.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/Config.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/display/Input.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/display/SpriteConst.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/Const.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/events/Event.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/events/MouseManager.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/maths/Matrix.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/maths/Point.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/renders/Render.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/renders/RenderInfo.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/resource/Context.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/resource/HTMLCanvas.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/utils/Browser.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/utils/CallLater.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/utils/ColorUtils.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/utils/RunDriver.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/utils/VectorGraphManager.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/webgl/utils/RenderState2D.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/webgl/WebGLContext.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/utils/Stat.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/utils/Timer.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/ILaya.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/layagl/LayaGL.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/utils/ClassUtils.ts"
  ],
  "map": "{\"version\":3,\"file\":\"Stage.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../libs/laya/display/Stage.ts\"],\"names\":[],\"mappings\":\"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\"}",
  "dts": {
    "name": "D:/widgets/LayaDataStructuresAlgorithms/.rpt2_cache/placeholder/laya/display/Stage.d.ts",
    "writeByteOrderMark": false,
    "text": "import { Sprite } from \"./Sprite\";\r\nimport { Node } from \"./Node\";\r\nimport { Matrix } from \"../maths/Matrix\";\r\nimport { Point } from \"../maths/Point\";\r\nimport { Context } from \"../resource/Context\";\r\nexport declare class Stage extends Sprite {\r\n    static SCALE_NOSCALE: string;\r\n    static SCALE_EXACTFIT: string;\r\n    static SCALE_SHOWALL: string;\r\n    static SCALE_NOBORDER: string;\r\n    static SCALE_FULL: string;\r\n    static SCALE_FIXED_WIDTH: string;\r\n    static SCALE_FIXED_HEIGHT: string;\r\n    static SCALE_FIXED_AUTO: string;\r\n    static ALIGN_LEFT: string;\r\n    static ALIGN_RIGHT: string;\r\n    static ALIGN_CENTER: string;\r\n    static ALIGN_TOP: string;\r\n    static ALIGN_MIDDLE: string;\r\n    static ALIGN_BOTTOM: string;\r\n    static SCREEN_NONE: string;\r\n    static SCREEN_HORIZONTAL: string;\r\n    static SCREEN_VERTICAL: string;\r\n    static FRAME_FAST: string;\r\n    static FRAME_SLOW: string;\r\n    static FRAME_MOUSE: string;\r\n    static FRAME_SLEEP: string;\r\n    focus: Node;\r\n    offset: Point;\r\n    private _frameRate;\r\n    designWidth: number;\r\n    designHeight: number;\r\n    canvasRotation: boolean;\r\n    canvasDegree: number;\r\n    renderingEnabled: boolean;\r\n    screenAdaptationEnabled: boolean;\r\n    _canvasTransform: Matrix;\r\n    private _screenMode;\r\n    private _scaleMode;\r\n    private _alignV;\r\n    private _alignH;\r\n    private _bgColor;\r\n    private _mouseMoveTime;\r\n    private _renderCount;\r\n    private _safariOffsetY;\r\n    private _frameStartTime;\r\n    private _previousOrientation;\r\n    private _isFocused;\r\n    private _isVisibility;\r\n    _wgColor: number[] | null;\r\n    _scene3Ds: any[];\r\n    private _globalRepaintSet;\r\n    private _globalRepaintGet;\r\n    _3dUI: Sprite[];\r\n    _curUIBase: Sprite | null;\r\n    useRetinalCanvas: boolean;\r\n    constructor();\r\n    private _isInputting;\r\n    width: number;\r\n    height: number;\r\n    transform: Matrix;\r\n    readonly isFocused: boolean;\r\n    readonly isVisibility: boolean;\r\n    private _changeCanvasSize;\r\n    protected _resetCanvas(): void;\r\n    setScreenSize(screenWidth: number, screenHeight: number): void;\r\n    private _formatData;\r\n    scaleMode: string;\r\n    alignH: string;\r\n    alignV: string;\r\n    bgColor: string;\r\n    readonly mouseX: number;\r\n    readonly mouseY: number;\r\n    getMousePoint(): Point;\r\n    readonly clientScaleX: number;\r\n    readonly clientScaleY: number;\r\n    screenMode: string;\r\n    repaint(type?: number): void;\r\n    parentRepaint(type?: number): void;\r\n    _loop(): boolean;\r\n    getFrameTm(): number;\r\n    private _onmouseMove;\r\n    getTimeFromFrameStart(): number;\r\n    visible: boolean;\r\n    static clear: Function;\r\n    render(context: Context, x: number, y: number): void;\r\n    renderToNative(context: Context, x: number, y: number): void;\r\n    private _updateTimers;\r\n    fullScreenEnabled: boolean;\r\n    frameRate: string;\r\n    private _requestFullscreen;\r\n    private _fullScreenChanged;\r\n    exitFullscreen(): void;\r\n    isGlobalRepaint(): boolean;\r\n    setGlobalRepaint(): void;\r\n    add3DUI(uibase: Sprite): void;\r\n    remove3DUI(uibase: Sprite): boolean;\r\n}\r\n"
  }
}
