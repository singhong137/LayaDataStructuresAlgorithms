{
  "code": "import { ILaya } from \"../../../ILaya\";\r\nimport { Stat } from \"../../utils/Stat\";\r\nimport { StringKey } from \"../../utils/StringKey\";\r\nimport { WebGLContext } from \"../WebGLContext\";\r\nimport { BaseShader } from \"./BaseShader\";\r\nimport { LayaGL } from \"../../layagl/LayaGL\";\r\nexport class Shader extends BaseShader {\r\n    constructor(vs, ps, saveName = null, nameMap = null, bindAttrib = null) {\r\n        super();\r\n        this._attribInfo = null;\r\n        this.customCompile = false;\r\n        this._curActTexIndex = 0;\r\n        this.tag = {};\r\n        this._program = null;\r\n        this._params = null;\r\n        this._paramsMap = {};\r\n        if ((!vs) || (!ps))\r\n            throw \"Shader Error\";\r\n        this._attribInfo = bindAttrib;\r\n        this._id = ++Shader._count;\r\n        this._vs = vs;\r\n        this._ps = ps;\r\n        this._nameMap = nameMap ? nameMap : {};\r\n        saveName != null && (Shader.sharders[saveName] = this);\r\n        this.recreateResource();\r\n        this.lock = true;\r\n    }\r\n    static getShader(name) {\r\n        return Shader.sharders[name];\r\n    }\r\n    static create(vs, ps, saveName = null, nameMap = null, bindAttrib = null) {\r\n        return new Shader(vs, ps, saveName, nameMap, bindAttrib);\r\n    }\r\n    static withCompile(nameID, define, shaderName, createShader) {\r\n        if (shaderName && Shader.sharders[shaderName])\r\n            return Shader.sharders[shaderName];\r\n        var pre = Shader._preCompileShader[Shader.SHADERNAME2ID * nameID];\r\n        if (!pre)\r\n            throw new Error(\"withCompile shader err!\" + nameID);\r\n        return pre.createShader(define, shaderName, createShader, null);\r\n    }\r\n    static withCompile2D(nameID, mainID, define, shaderName, createShader, bindAttrib = null) {\r\n        if (shaderName && Shader.sharders[shaderName])\r\n            return Shader.sharders[shaderName];\r\n        var pre = Shader._preCompileShader[Shader.SHADERNAME2ID * nameID + mainID];\r\n        if (!pre)\r\n            throw new Error(\"withCompile shader err!\" + nameID + \" \" + mainID);\r\n        return pre.createShader(define, shaderName, createShader, bindAttrib);\r\n    }\r\n    static addInclude(fileName, txt) {\r\n        ILaya.ShaderCompile.addInclude(fileName, txt);\r\n    }\r\n    static preCompile(nameID, vs, ps, nameMap) {\r\n        var id = Shader.SHADERNAME2ID * nameID;\r\n        Shader._preCompileShader[id] = new ILaya.ShaderCompile(vs, ps, nameMap);\r\n    }\r\n    static preCompile2D(nameID, mainID, vs, ps, nameMap) {\r\n        var id = Shader.SHADERNAME2ID * nameID + mainID;\r\n        Shader._preCompileShader[id] = new ILaya.ShaderCompile(vs, ps, nameMap);\r\n    }\r\n    recreateResource() {\r\n        this._compile();\r\n        this._setGPUMemory(0);\r\n    }\r\n    _disposeResource() {\r\n        WebGLContext.mainContext.deleteShader(this._vshader);\r\n        WebGLContext.mainContext.deleteShader(this._pshader);\r\n        WebGLContext.mainContext.deleteProgram(this._program);\r\n        this._vshader = this._pshader = this._program = null;\r\n        this._params = null;\r\n        this._paramsMap = {};\r\n        this._setGPUMemory(0);\r\n        this._curActTexIndex = 0;\r\n    }\r\n    _compile() {\r\n        if (!this._vs || !this._ps || this._params)\r\n            return;\r\n        this._reCompile = true;\r\n        this._params = [];\r\n        var result;\r\n        if (this.customCompile)\r\n            result = ILaya.ShaderCompile.preGetParams(this._vs, this._ps);\r\n        var gl = WebGLContext.mainContext;\r\n        this._program = gl.createProgram();\r\n        this._vshader = Shader._createShader(gl, this._vs, gl.VERTEX_SHADER);\r\n        this._pshader = Shader._createShader(gl, this._ps, gl.FRAGMENT_SHADER);\r\n        gl.attachShader(this._program, this._vshader);\r\n        gl.attachShader(this._program, this._pshader);\r\n        var one, i, j, n, location;\r\n        var attribDescNum = this._attribInfo ? this._attribInfo.length : 0;\r\n        for (i = 0; i < attribDescNum; i += 2) {\r\n            gl.bindAttribLocation(this._program, this._attribInfo[i + 1], this._attribInfo[i]);\r\n        }\r\n        gl.linkProgram(this._program);\r\n        if (!this.customCompile && !gl.getProgramParameter(this._program, gl.LINK_STATUS)) {\r\n            throw gl.getProgramInfoLog(this._program);\r\n        }\r\n        var nUniformNum = this.customCompile ? result.uniforms.length : gl.getProgramParameter(this._program, gl.ACTIVE_UNIFORMS);\r\n        for (i = 0; i < nUniformNum; i++) {\r\n            var uniform = this.customCompile ? result.uniforms[i] : gl.getActiveUniform(this._program, i);\r\n            location = gl.getUniformLocation(this._program, uniform.name);\r\n            one = { vartype: \"uniform\", glfun: null, ivartype: 1, location: location, name: uniform.name, type: uniform.type, isArray: false, isSame: false, preValue: null, indexOfParams: 0 };\r\n            if (one.name.indexOf('[0]') > 0) {\r\n                one.name = one.name.substr(0, one.name.length - 3);\r\n                one.isArray = true;\r\n                one.location = gl.getUniformLocation(this._program, one.name);\r\n            }\r\n            this._params.push(one);\r\n        }\r\n        for (i = 0, n = this._params.length; i < n; i++) {\r\n            one = this._params[i];\r\n            one.indexOfParams = i;\r\n            one.index = 1;\r\n            one.value = [one.location, null];\r\n            one.codename = one.name;\r\n            one.name = this._nameMap[one.codename] ? this._nameMap[one.codename] : one.codename;\r\n            this._paramsMap[one.name] = one;\r\n            one._this = this;\r\n            one.uploadedValue = [];\r\n            switch (one.type) {\r\n                case gl.INT:\r\n                    one.fun = one.isArray ? this._uniform1iv : this._uniform1i;\r\n                    break;\r\n                case gl.FLOAT:\r\n                    one.fun = one.isArray ? this._uniform1fv : this._uniform1f;\r\n                    break;\r\n                case gl.FLOAT_VEC2:\r\n                    one.fun = one.isArray ? this._uniform_vec2v : this._uniform_vec2;\r\n                    break;\r\n                case gl.FLOAT_VEC3:\r\n                    one.fun = one.isArray ? this._uniform_vec3v : this._uniform_vec3;\r\n                    break;\r\n                case gl.FLOAT_VEC4:\r\n                    one.fun = one.isArray ? this._uniform_vec4v : this._uniform_vec4;\r\n                    break;\r\n                case gl.SAMPLER_2D:\r\n                    one.fun = this._uniform_sampler2D;\r\n                    break;\r\n                case gl.SAMPLER_CUBE:\r\n                    one.fun = this._uniform_samplerCube;\r\n                    break;\r\n                case gl.FLOAT_MAT4:\r\n                    one.glfun = gl.uniformMatrix4fv;\r\n                    one.fun = this._uniformMatrix4fv;\r\n                    break;\r\n                case gl.BOOL:\r\n                    one.fun = this._uniform1i;\r\n                    break;\r\n                case gl.FLOAT_MAT2:\r\n                case gl.FLOAT_MAT3:\r\n                    throw new Error(\"compile shader err!\");\r\n                default:\r\n                    throw new Error(\"compile shader err!\");\r\n            }\r\n        }\r\n    }\r\n    static _createShader(gl, str, type) {\r\n        var shader = gl.createShader(type);\r\n        gl.shaderSource(shader, str);\r\n        gl.compileShader(shader);\r\n        if (gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\r\n            return shader;\r\n        }\r\n        else {\r\n            console.log(gl.getShaderInfoLog(shader));\r\n            return null;\r\n        }\r\n    }\r\n    getUniform(name) {\r\n        return this._paramsMap[name];\r\n    }\r\n    _uniform1f(one, value) {\r\n        var uploadedValue = one.uploadedValue;\r\n        if (uploadedValue[0] !== value) {\r\n            WebGLContext.mainContext.uniform1f(one.location, uploadedValue[0] = value);\r\n            return 1;\r\n        }\r\n        return 0;\r\n    }\r\n    _uniform1fv(one, value) {\r\n        if (value.length < 4) {\r\n            var uploadedValue = one.uploadedValue;\r\n            if (uploadedValue[0] !== value[0] || uploadedValue[1] !== value[1] || uploadedValue[2] !== value[2] || uploadedValue[3] !== value[3]) {\r\n                WebGLContext.mainContext.uniform1fv(one.location, value);\r\n                uploadedValue[0] = value[0];\r\n                uploadedValue[1] = value[1];\r\n                uploadedValue[2] = value[2];\r\n                uploadedValue[3] = value[3];\r\n                return 1;\r\n            }\r\n            return 0;\r\n        }\r\n        else {\r\n            WebGLContext.mainContext.uniform1fv(one.location, value);\r\n            return 1;\r\n        }\r\n    }\r\n    _uniform_vec2(one, value) {\r\n        var uploadedValue = one.uploadedValue;\r\n        if (uploadedValue[0] !== value[0] || uploadedValue[1] !== value[1]) {\r\n            WebGLContext.mainContext.uniform2f(one.location, uploadedValue[0] = value[0], uploadedValue[1] = value[1]);\r\n            return 1;\r\n        }\r\n        return 0;\r\n    }\r\n    _uniform_vec2v(one, value) {\r\n        if (value.length < 2) {\r\n            var uploadedValue = one.uploadedValue;\r\n            if (uploadedValue[0] !== value[0] || uploadedValue[1] !== value[1] || uploadedValue[2] !== value[2] || uploadedValue[3] !== value[3]) {\r\n                WebGLContext.mainContext.uniform2fv(one.location, value);\r\n                uploadedValue[0] = value[0];\r\n                uploadedValue[1] = value[1];\r\n                uploadedValue[2] = value[2];\r\n                uploadedValue[3] = value[3];\r\n                return 1;\r\n            }\r\n            return 0;\r\n        }\r\n        else {\r\n            WebGLContext.mainContext.uniform2fv(one.location, value);\r\n            return 1;\r\n        }\r\n    }\r\n    _uniform_vec3(one, value) {\r\n        var uploadedValue = one.uploadedValue;\r\n        if (uploadedValue[0] !== value[0] || uploadedValue[1] !== value[1] || uploadedValue[2] !== value[2]) {\r\n            WebGLContext.mainContext.uniform3f(one.location, uploadedValue[0] = value[0], uploadedValue[1] = value[1], uploadedValue[2] = value[2]);\r\n            return 1;\r\n        }\r\n        return 0;\r\n    }\r\n    _uniform_vec3v(one, value) {\r\n        WebGLContext.mainContext.uniform3fv(one.location, value);\r\n        return 1;\r\n    }\r\n    _uniform_vec4(one, value) {\r\n        var uploadedValue = one.uploadedValue;\r\n        if (uploadedValue[0] !== value[0] || uploadedValue[1] !== value[1] || uploadedValue[2] !== value[2] || uploadedValue[3] !== value[3]) {\r\n            WebGLContext.mainContext.uniform4f(one.location, uploadedValue[0] = value[0], uploadedValue[1] = value[1], uploadedValue[2] = value[2], uploadedValue[3] = value[3]);\r\n            return 1;\r\n        }\r\n        return 0;\r\n    }\r\n    _uniform_vec4v(one, value) {\r\n        WebGLContext.mainContext.uniform4fv(one.location, value);\r\n        return 1;\r\n    }\r\n    _uniformMatrix2fv(one, value) {\r\n        WebGLContext.mainContext.uniformMatrix2fv(one.location, false, value);\r\n        return 1;\r\n    }\r\n    _uniformMatrix3fv(one, value) {\r\n        WebGLContext.mainContext.uniformMatrix3fv(one.location, false, value);\r\n        return 1;\r\n    }\r\n    _uniformMatrix4fv(one, value) {\r\n        WebGLContext.mainContext.uniformMatrix4fv(one.location, false, value);\r\n        return 1;\r\n    }\r\n    _uniform1i(one, value) {\r\n        var uploadedValue = one.uploadedValue;\r\n        if (uploadedValue[0] !== value) {\r\n            WebGLContext.mainContext.uniform1i(one.location, uploadedValue[0] = value);\r\n            return 1;\r\n        }\r\n        return 0;\r\n    }\r\n    _uniform1iv(one, value) {\r\n        WebGLContext.mainContext.uniform1iv(one.location, value);\r\n        return 1;\r\n    }\r\n    _uniform_ivec2(one, value) {\r\n        var uploadedValue = one.uploadedValue;\r\n        if (uploadedValue[0] !== value[0] || uploadedValue[1] !== value[1]) {\r\n            WebGLContext.mainContext.uniform2i(one.location, uploadedValue[0] = value[0], uploadedValue[1] = value[1]);\r\n            return 1;\r\n        }\r\n        return 0;\r\n    }\r\n    _uniform_ivec2v(one, value) {\r\n        WebGLContext.mainContext.uniform2iv(one.location, value);\r\n        return 1;\r\n    }\r\n    _uniform_vec3i(one, value) {\r\n        var uploadedValue = one.uploadedValue;\r\n        if (uploadedValue[0] !== value[0] || uploadedValue[1] !== value[1] || uploadedValue[2] !== value[2]) {\r\n            WebGLContext.mainContext.uniform3i(one.location, uploadedValue[0] = value[0], uploadedValue[1] = value[1], uploadedValue[2] = value[2]);\r\n            return 1;\r\n        }\r\n        return 0;\r\n    }\r\n    _uniform_vec3vi(one, value) {\r\n        WebGLContext.mainContext.uniform3iv(one.location, value);\r\n        return 1;\r\n    }\r\n    _uniform_vec4i(one, value) {\r\n        var uploadedValue = one.uploadedValue;\r\n        if (uploadedValue[0] !== value[0] || uploadedValue[1] !== value[1] || uploadedValue[2] !== value[2] || uploadedValue[3] !== value[3]) {\r\n            WebGLContext.mainContext.uniform4i(one.location, uploadedValue[0] = value[0], uploadedValue[1] = value[1], uploadedValue[2] = value[2], uploadedValue[3] = value[3]);\r\n            return 1;\r\n        }\r\n        return 0;\r\n    }\r\n    _uniform_vec4vi(one, value) {\r\n        WebGLContext.mainContext.uniform4iv(one.location, value);\r\n        return 1;\r\n    }\r\n    _uniform_sampler2D(one, value) {\r\n        var gl = WebGLContext.mainContext;\r\n        var uploadedValue = one.uploadedValue;\r\n        if (uploadedValue[0] == null) {\r\n            uploadedValue[0] = this._curActTexIndex;\r\n            gl.uniform1i(one.location, this._curActTexIndex);\r\n            WebGLContext.activeTexture(gl, gl.TEXTURE0 + this._curActTexIndex);\r\n            WebGLContext.bindTexture(gl, gl.TEXTURE_2D, value);\r\n            this._curActTexIndex++;\r\n            return 1;\r\n        }\r\n        else {\r\n            WebGLContext.activeTexture(gl, gl.TEXTURE0 + uploadedValue[0]);\r\n            WebGLContext.bindTexture(gl, gl.TEXTURE_2D, value);\r\n            return 0;\r\n        }\r\n    }\r\n    _uniform_samplerCube(one, value) {\r\n        var gl = WebGLContext.mainContext;\r\n        var uploadedValue = one.uploadedValue;\r\n        if (uploadedValue[0] == null) {\r\n            uploadedValue[0] = this._curActTexIndex;\r\n            gl.uniform1i(one.location, this._curActTexIndex);\r\n            WebGLContext.activeTexture(gl, gl.TEXTURE0 + this._curActTexIndex);\r\n            WebGLContext.bindTexture(gl, gl.TEXTURE_CUBE_MAP, value);\r\n            this._curActTexIndex++;\r\n            return 1;\r\n        }\r\n        else {\r\n            WebGLContext.activeTexture(gl, gl.TEXTURE0 + uploadedValue[0]);\r\n            WebGLContext.bindTexture(gl, gl.TEXTURE_CUBE_MAP, value);\r\n            return 0;\r\n        }\r\n    }\r\n    _noSetValue(one) {\r\n        console.log(\"no....:\" + one.name);\r\n    }\r\n    uploadOne(name, value) {\r\n        WebGLContext.useProgram(WebGLContext.mainContext, this._program);\r\n        var one = this._paramsMap[name];\r\n        one.fun.call(this, one, value);\r\n    }\r\n    uploadTexture2D(value) {\r\n        var CTX = WebGLContext;\r\n        if (CTX._activeTextures[0] !== value) {\r\n            CTX.bindTexture(WebGLContext.mainContext, LayaGL.instance.TEXTURE_2D, value);\r\n            CTX._activeTextures[0] = value;\r\n        }\r\n    }\r\n    upload(shaderValue, params = null) {\r\n        BaseShader.activeShader = BaseShader.bindShader = this;\r\n        var gl = WebGLContext.mainContext;\r\n        WebGLContext.useProgram(gl, this._program);\r\n        if (this._reCompile) {\r\n            params = this._params;\r\n            this._reCompile = false;\r\n        }\r\n        else {\r\n            params = params || this._params;\r\n        }\r\n        var one, value, n = params.length, shaderCall = 0;\r\n        for (var i = 0; i < n; i++) {\r\n            one = params[i];\r\n            if ((value = shaderValue[one.name]) !== null)\r\n                shaderCall += one.fun.call(this, one, value);\r\n        }\r\n        Stat.shaderCall += shaderCall;\r\n    }\r\n    uploadArray(shaderValue, length, _bufferUsage) {\r\n        BaseShader.activeShader = this;\r\n        BaseShader.bindShader = this;\r\n        WebGLContext.useProgram(WebGLContext.mainContext, this._program);\r\n        var params = this._params, value;\r\n        var one, shaderCall = 0;\r\n        for (var i = length - 2; i >= 0; i -= 2) {\r\n            one = this._paramsMap[shaderValue[i]];\r\n            if (!one)\r\n                continue;\r\n            value = shaderValue[i + 1];\r\n            if (value != null) {\r\n                _bufferUsage && _bufferUsage[one.name] && _bufferUsage[one.name].bind();\r\n                shaderCall += one.fun.call(this, one, value);\r\n            }\r\n        }\r\n        Stat.shaderCall += shaderCall;\r\n    }\r\n    getParams() {\r\n        return this._params;\r\n    }\r\n    setAttributesLocation(attribDesc) {\r\n        this._attribInfo = attribDesc;\r\n    }\r\n}\r\nShader._count = 0;\r\nShader._preCompileShader = {};\r\nShader.SHADERNAME2ID = 0.0002;\r\nShader.nameKey = new StringKey();\r\nShader.sharders = new Array(0x20);\r\n//# sourceMappingURL=Shader.js.map",
  "references": [
    "D:/widgets/LayaDataStructuresAlgorithms/libs/ILaya.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/utils/Stat.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/utils/StringKey.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/webgl/utils/ShaderCompile.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/webgl/WebGLContext.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/webgl/shader/BaseShader.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/webgl/shader/ShaderValue.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/layagl/LayaGL.ts"
  ],
  "map": "{\"version\":3,\"file\":\"Shader.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../libs/laya/webgl/shader/Shader.ts\"],\"names\":[],\"mappings\":\"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\"}",
  "dts": {
    "name": "D:/widgets/LayaDataStructuresAlgorithms/.rpt2_cache/placeholder/laya/webgl/shader/Shader.d.ts",
    "writeByteOrderMark": false,
    "text": "import { StringKey } from \"../../utils/StringKey\";\r\nimport { BaseShader } from \"./BaseShader\";\r\nimport { ShaderValue } from \"./ShaderValue\";\r\nexport declare class Shader extends BaseShader {\r\n    private static _count;\r\n    static _preCompileShader: any;\r\n    private _attribInfo;\r\n    static SHADERNAME2ID: number;\r\n    static nameKey: StringKey;\r\n    static sharders: any[];\r\n    static getShader(name: any): Shader;\r\n    static create(vs: string, ps: string, saveName?: any, nameMap?: any, bindAttrib?: any[]): Shader;\r\n    static withCompile(nameID: number, define: any, shaderName: any, createShader: Function): Shader;\r\n    static withCompile2D(nameID: number, mainID: number, define: any, shaderName: any, createShader: Function, bindAttrib?: any[]): Shader;\r\n    static addInclude(fileName: string, txt: string): void;\r\n    static preCompile(nameID: number, vs: string, ps: string, nameMap: any): void;\r\n    static preCompile2D(nameID: number, mainID: number, vs: string, ps: string, nameMap: any): void;\r\n    private customCompile;\r\n    private _nameMap;\r\n    private _vs;\r\n    private _ps;\r\n    private _curActTexIndex;\r\n    private _reCompile;\r\n    tag: any;\r\n    _vshader: any;\r\n    _pshader: any;\r\n    _program: any;\r\n    _params: any[];\r\n    _paramsMap: any;\r\n    constructor(vs: string, ps: string, saveName?: any, nameMap?: any, bindAttrib?: any[] | null);\r\n    protected recreateResource(): void;\r\n    protected _disposeResource(): void;\r\n    private _compile;\r\n    private static _createShader;\r\n    getUniform(name: string): any;\r\n    private _uniform1f;\r\n    private _uniform1fv;\r\n    private _uniform_vec2;\r\n    private _uniform_vec2v;\r\n    private _uniform_vec3;\r\n    private _uniform_vec3v;\r\n    private _uniform_vec4;\r\n    private _uniform_vec4v;\r\n    private _uniformMatrix2fv;\r\n    private _uniformMatrix3fv;\r\n    private _uniformMatrix4fv;\r\n    private _uniform1i;\r\n    private _uniform1iv;\r\n    private _uniform_ivec2;\r\n    private _uniform_ivec2v;\r\n    private _uniform_vec3i;\r\n    private _uniform_vec3vi;\r\n    private _uniform_vec4i;\r\n    private _uniform_vec4vi;\r\n    private _uniform_sampler2D;\r\n    private _uniform_samplerCube;\r\n    private _noSetValue;\r\n    uploadOne(name: string, value: any): void;\r\n    uploadTexture2D(value: any): void;\r\n    upload(shaderValue: ShaderValue, params?: any[]): void;\r\n    uploadArray(shaderValue: any[], length: number, _bufferUsage: any): void;\r\n    getParams(): any[];\r\n    setAttributesLocation(attribDesc: any[]): void;\r\n}\r\n"
  }
}
