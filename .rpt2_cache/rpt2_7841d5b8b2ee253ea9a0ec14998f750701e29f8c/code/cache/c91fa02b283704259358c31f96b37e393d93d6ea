{
  "code": "import { ILaya } from \"../../ILaya\";\r\nimport { Event } from \"../events/Event\";\r\nimport { EventDispatcher } from \"../events/EventDispatcher\";\r\nimport { URL } from \"../net/URL\";\r\nimport { Resource } from \"../resource/Resource\";\r\nimport { Texture } from \"../resource/Texture\";\r\nimport { Handler } from \"../utils/Handler\";\r\nimport { Utils } from \"../utils/Utils\";\r\nimport { AtlasInfoManager } from \"./AtlasInfoManager\";\r\nimport { Loader } from \"./Loader\";\r\nexport class LoaderManager extends EventDispatcher {\r\n    constructor() {\r\n        super();\r\n        this.retryNum = 1;\r\n        this.retryDelay = 0;\r\n        this.maxLoader = 5;\r\n        this._loaders = [];\r\n        this._loaderCount = 0;\r\n        this._resInfos = [];\r\n        this._infoPool = [];\r\n        this._maxPriority = 5;\r\n        this._failRes = {};\r\n        this._statInfo = { count: 1, loaded: 1 };\r\n        for (var i = 0; i < this._maxPriority; i++)\r\n            this._resInfos[i] = [];\r\n    }\r\n    getProgress() {\r\n        return this._statInfo.loaded / this._statInfo.count;\r\n    }\r\n    resetProgress() {\r\n        this._statInfo.count = this._statInfo.loaded = 1;\r\n    }\r\n    create(url, complete = null, progress = null, type = null, constructParams = null, propertyParams = null, priority = 1, cache = true) {\r\n        this._create(url, true, complete, progress, type, constructParams, propertyParams, priority, cache);\r\n    }\r\n    _create(url, mainResou, complete = null, progress = null, type = null, constructParams = null, propertyParams = null, priority = 1, cache = true) {\r\n        if (url instanceof Array) {\r\n            var allScuess = true;\r\n            var items = url;\r\n            var itemCount = items.length;\r\n            var loadedCount = 0;\r\n            if (progress) {\r\n                var progress2 = Handler.create(progress.caller, progress ? progress.method : null, progress.args, false);\r\n            }\r\n            for (var i = 0; i < itemCount; i++) {\r\n                var item = items[i];\r\n                if (typeof (item) == 'string')\r\n                    item = items[i] = { url: item };\r\n                item.progress = 0;\r\n            }\r\n            for (i = 0; i < itemCount; i++) {\r\n                item = items[i];\r\n                var progressHandler = progress ? Handler.create(null, function (item, value) {\r\n                    item.progress = value;\r\n                    var num = 0;\r\n                    for (var j = 0; j < itemCount; j++) {\r\n                        var item1 = items[j];\r\n                        num += item1.progress;\r\n                    }\r\n                    var v = num / itemCount;\r\n                    progress2.runWith(v);\r\n                }, [item], false) : null;\r\n                var completeHandler = (progress || complete) ? Handler.create(null, function (item, content = null) {\r\n                    loadedCount++;\r\n                    item.progress = 1;\r\n                    content || (allScuess = false);\r\n                    if (loadedCount === itemCount && complete) {\r\n                        complete.runWith(allScuess);\r\n                    }\r\n                }, [item]) : null;\r\n                this._createOne(item.url, mainResou, completeHandler, progressHandler, item.type || type, item.constructParams || constructParams, item.propertyParams || propertyParams, item.priority || priority, cache);\r\n            }\r\n        }\r\n        else {\r\n            this._createOne(url, mainResou, complete, progress, type, constructParams, propertyParams, priority, cache);\r\n        }\r\n    }\r\n    _createOne(url, mainResou, complete = null, progress = null, type = null, constructParams = null, propertyParams = null, priority = 1, cache = true) {\r\n        var item = this.getRes(url);\r\n        if (!item) {\r\n            var extension = Utils.getFileExtension(url);\r\n            (type) || (type = LoaderManager.createMap[extension] ? LoaderManager.createMap[extension][0] : null);\r\n            if (!type) {\r\n                this.load(url, complete, progress, type, priority, cache);\r\n                return;\r\n            }\r\n            var parserMap = Loader.parserMap;\r\n            if (!parserMap[type]) {\r\n                this.load(url, complete, progress, type, priority, cache);\r\n                return;\r\n            }\r\n            this._createLoad(url, Handler.create(null, function (createRes) {\r\n                if (createRes) {\r\n                    if (!mainResou && createRes instanceof Resource)\r\n                        createRes._addReference();\r\n                    createRes._setCreateURL(url);\r\n                }\r\n                complete && complete.runWith(createRes);\r\n                ILaya.loader.event(url);\r\n            }), progress, type, constructParams, propertyParams, priority, cache, true);\r\n        }\r\n        else {\r\n            if (!mainResou && item instanceof Resource)\r\n                item._addReference();\r\n            progress && progress.runWith(1);\r\n            complete && complete.runWith(item);\r\n        }\r\n    }\r\n    load(url, complete = null, progress = null, type = null, priority = 1, cache = true, group = null, ignoreCache = false, useWorkerLoader = ILaya.WorkerLoader.enable) {\r\n        if (url instanceof Array) {\r\n            return this._loadAssets(url, complete, progress, type, priority, cache, group);\r\n        }\r\n        var content;\r\n        if (type === Loader.IMAGE)\r\n            content = Loader.textureMap[URL.formatURL(url)];\r\n        else\r\n            content = Loader.loadedMap[URL.formatURL(url)];\r\n        if (!ignoreCache && content != null) {\r\n            ILaya.systemTimer.frameOnce(1, this, function () {\r\n                progress && progress.runWith(1);\r\n                complete && complete.runWith(content instanceof Array ? [content] : content);\r\n                this._loaderCount || this.event(Event.COMPLETE);\r\n            });\r\n        }\r\n        else {\r\n            var original;\r\n            original = url;\r\n            url = AtlasInfoManager.getFileLoadPath(url);\r\n            if (url != original && type !== \"nativeimage\") {\r\n                type = Loader.ATLAS;\r\n            }\r\n            else {\r\n                original = null;\r\n            }\r\n            var info = LoaderManager._resMap[url];\r\n            if (!info) {\r\n                info = this._infoPool.length ? this._infoPool.pop() : new ResInfo();\r\n                info.url = url;\r\n                info.type = type;\r\n                info.cache = cache;\r\n                info.group = group;\r\n                info.ignoreCache = ignoreCache;\r\n                info.useWorkerLoader = useWorkerLoader;\r\n                info.originalUrl = original;\r\n                complete && info.on(Event.COMPLETE, complete.caller, complete.method, complete.args);\r\n                progress && info.on(Event.PROGRESS, progress.caller, progress.method, progress.args);\r\n                LoaderManager._resMap[url] = info;\r\n                priority = priority < this._maxPriority ? priority : this._maxPriority - 1;\r\n                this._resInfos[priority].push(info);\r\n                this._statInfo.count++;\r\n                this.event(Event.PROGRESS, this.getProgress());\r\n                this._next();\r\n            }\r\n            else {\r\n                if (complete) {\r\n                    if (original) {\r\n                        complete && info._createListener(Event.COMPLETE, this, this._resInfoLoaded, [original, complete], false, false);\r\n                    }\r\n                    else {\r\n                        complete && info._createListener(Event.COMPLETE, complete.caller, complete.method, complete.args, false, false);\r\n                    }\r\n                }\r\n                progress && info._createListener(Event.PROGRESS, progress.caller, progress.method, progress.args, false, false);\r\n            }\r\n        }\r\n        return this;\r\n    }\r\n    _resInfoLoaded(original, complete) {\r\n        complete.runWith(Loader.getRes(original));\r\n    }\r\n    _createLoad(url, complete = null, progress = null, type = null, constructParams = null, propertyParams = null, priority = 1, cache = true, ignoreCache = false) {\r\n        if (url instanceof Array)\r\n            return this._loadAssets(url, complete, progress, type, priority, cache);\r\n        var content = Loader.getRes(url);\r\n        if (content != null) {\r\n            ILaya.systemTimer.frameOnce(1, this, function () {\r\n                progress && progress.runWith(1);\r\n                complete && complete.runWith(content);\r\n                this._loaderCount || this.event(Event.COMPLETE);\r\n            });\r\n        }\r\n        else {\r\n            var info = LoaderManager._resMap[url];\r\n            if (!info) {\r\n                info = this._infoPool.length ? this._infoPool.pop() : new ResInfo();\r\n                info.url = url;\r\n                info.type = type;\r\n                info.cache = false;\r\n                info.ignoreCache = ignoreCache;\r\n                info.originalUrl = null;\r\n                info.group = null;\r\n                info.createCache = cache;\r\n                info.createConstructParams = constructParams;\r\n                info.createPropertyParams = propertyParams;\r\n                complete && info.on(Event.COMPLETE, complete.caller, complete.method, complete.args);\r\n                progress && info.on(Event.PROGRESS, progress.caller, progress.method, progress.args);\r\n                LoaderManager._resMap[url] = info;\r\n                priority = priority < this._maxPriority ? priority : this._maxPriority - 1;\r\n                this._resInfos[priority].push(info);\r\n                this._statInfo.count++;\r\n                this.event(Event.PROGRESS, this.getProgress());\r\n                this._next();\r\n            }\r\n            else {\r\n                complete && info._createListener(Event.COMPLETE, complete.caller, complete.method, complete.args, false, false);\r\n                progress && info._createListener(Event.PROGRESS, progress.caller, progress.method, progress.args, false, false);\r\n            }\r\n        }\r\n        return this;\r\n    }\r\n    _next() {\r\n        if (this._loaderCount >= this.maxLoader)\r\n            return;\r\n        for (var i = 0; i < this._maxPriority; i++) {\r\n            var infos = this._resInfos[i];\r\n            while (infos.length > 0) {\r\n                var info = infos.shift();\r\n                if (info)\r\n                    return this._doLoad(info);\r\n            }\r\n        }\r\n        this._loaderCount || this.event(Event.COMPLETE);\r\n    }\r\n    _doLoad(resInfo) {\r\n        this._loaderCount++;\r\n        var loader = this._loaders.length ? this._loaders.pop() : new Loader();\r\n        loader.on(Event.COMPLETE, null, onLoaded);\r\n        loader.on(Event.PROGRESS, null, function (num) {\r\n            resInfo.event(Event.PROGRESS, num);\r\n        });\r\n        loader.on(Event.ERROR, null, function (msg) {\r\n            onLoaded(null);\r\n        });\r\n        var _me = this;\r\n        function onLoaded(data = null) {\r\n            loader.offAll();\r\n            loader._data = null;\r\n            loader._customParse = false;\r\n            _me._loaders.push(loader);\r\n            _me._endLoad(resInfo, data instanceof Array ? [data] : data);\r\n            _me._loaderCount--;\r\n            _me._next();\r\n        }\r\n        loader._constructParams = resInfo.createConstructParams;\r\n        loader._propertyParams = resInfo.createPropertyParams;\r\n        loader._createCache = resInfo.createCache;\r\n        loader.load(resInfo.url, resInfo.type, resInfo.cache, resInfo.group, resInfo.ignoreCache, resInfo.useWorkerLoader);\r\n    }\r\n    _endLoad(resInfo, content) {\r\n        var url = resInfo.url;\r\n        if (content == null) {\r\n            var errorCount = this._failRes[url] || 0;\r\n            if (errorCount < this.retryNum) {\r\n                console.warn(\"[warn]Retry to load:\", url);\r\n                this._failRes[url] = errorCount + 1;\r\n                ILaya.systemTimer.once(this.retryDelay, this, this._addReTry, [resInfo], false);\r\n                return;\r\n            }\r\n            else {\r\n                Loader.clearRes(url);\r\n                console.warn(\"[error]Failed to load:\", url);\r\n                this.event(Event.ERROR, url);\r\n            }\r\n        }\r\n        if (this._failRes[url])\r\n            this._failRes[url] = 0;\r\n        delete LoaderManager._resMap[url];\r\n        if (resInfo.originalUrl) {\r\n            content = Loader.getRes(resInfo.originalUrl);\r\n        }\r\n        resInfo.event(Event.COMPLETE, content);\r\n        resInfo.offAll();\r\n        this._infoPool.push(resInfo);\r\n        this._statInfo.loaded++;\r\n        this.event(Event.PROGRESS, this.getProgress());\r\n    }\r\n    _addReTry(resInfo) {\r\n        this._resInfos[this._maxPriority - 1].push(resInfo);\r\n        this._next();\r\n    }\r\n    clearRes(url) {\r\n        Loader.clearRes(url);\r\n    }\r\n    clearTextureRes(url) {\r\n        Loader.clearTextureRes(url);\r\n    }\r\n    getRes(url) {\r\n        return Loader.getRes(url);\r\n    }\r\n    cacheRes(url, data) {\r\n        Loader.cacheRes(url, data);\r\n    }\r\n    setGroup(url, group) {\r\n        Loader.setGroup(url, group);\r\n    }\r\n    clearResByGroup(group) {\r\n        Loader.clearResByGroup(group);\r\n    }\r\n    static cacheRes(url, data) {\r\n        Loader.cacheRes(url, data);\r\n    }\r\n    clearUnLoaded() {\r\n        for (var i = 0; i < this._maxPriority; i++) {\r\n            var infos = this._resInfos[i];\r\n            for (var j = infos.length - 1; j > -1; j--) {\r\n                var info = infos[j];\r\n                if (info) {\r\n                    info.offAll();\r\n                    this._infoPool.push(info);\r\n                }\r\n            }\r\n            infos.length = 0;\r\n        }\r\n        this._loaderCount = 0;\r\n        LoaderManager._resMap = {};\r\n    }\r\n    cancelLoadByUrls(urls) {\r\n        if (!urls)\r\n            return;\r\n        for (var i = 0, n = urls.length; i < n; i++) {\r\n            this.cancelLoadByUrl(urls[i]);\r\n        }\r\n    }\r\n    cancelLoadByUrl(url) {\r\n        for (var i = 0; i < this._maxPriority; i++) {\r\n            var infos = this._resInfos[i];\r\n            for (var j = infos.length - 1; j > -1; j--) {\r\n                var info = infos[j];\r\n                if (info && info.url === url) {\r\n                    infos[j] = null;\r\n                    info.offAll();\r\n                    this._infoPool.push(info);\r\n                }\r\n            }\r\n        }\r\n        if (LoaderManager._resMap[url])\r\n            delete LoaderManager._resMap[url];\r\n    }\r\n    _loadAssets(arr, complete = null, progress = null, type = null, priority = 1, cache = true, group = null) {\r\n        var itemCount = arr.length;\r\n        var loadedCount = 0;\r\n        var totalSize = 0;\r\n        var items = [];\r\n        var success = true;\r\n        for (var i = 0; i < itemCount; i++) {\r\n            let url = arr[i];\r\n            let item;\r\n            if (typeof (url) == 'string')\r\n                item = { url: url, type: type, size: 1, priority: priority };\r\n            else\r\n                item = url;\r\n            if (!item.size)\r\n                item.size = 1;\r\n            item.progress = 0;\r\n            totalSize += item.size;\r\n            items.push(item);\r\n            var progressHandler = progress ? Handler.create(null, loadProgress, [item], false) : null;\r\n            var completeHandler = (complete || progress) ? Handler.create(null, loadComplete, [item]) : null;\r\n            this.load(item.url, completeHandler, progressHandler, item.type, item.priority || 1, cache, item.group || group, false, item.useWorkerLoader);\r\n        }\r\n        function loadComplete(item, content = null) {\r\n            loadedCount++;\r\n            item.progress = 1;\r\n            if (!content)\r\n                success = false;\r\n            if (loadedCount === itemCount && complete) {\r\n                complete.runWith(success);\r\n            }\r\n        }\r\n        function loadProgress(item, value) {\r\n            if (progress != null) {\r\n                item.progress = value;\r\n                var num = 0;\r\n                for (var j = 0; j < items.length; j++) {\r\n                    var item1 = items[j];\r\n                    if (item1) {\r\n                        let prog = item1.progress == undefined ? 0 : item1.progress;\r\n                        num += item1.size == undefined ? 0 : item1.size * prog;\r\n                    }\r\n                }\r\n                var v = num / totalSize;\r\n                progress.runWith(v);\r\n            }\r\n        }\r\n        return this;\r\n    }\r\n    decodeBitmaps(urls) {\r\n        var i, len = urls.length;\r\n        var ctx;\r\n        ctx = ILaya.Render._context;\r\n        for (i = 0; i < len; i++) {\r\n            var atlas;\r\n            atlas = Loader.getAtlas(urls[i]);\r\n            if (atlas) {\r\n                this._decodeTexture(atlas[0], ctx);\r\n            }\r\n            else {\r\n                var tex;\r\n                tex = this.getRes(urls[i]);\r\n                if (tex && tex instanceof Texture) {\r\n                    this._decodeTexture(tex, ctx);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    _decodeTexture(tex, ctx) {\r\n        var bitmap = tex.bitmap;\r\n        if (!tex || !bitmap)\r\n            return;\r\n        var tImg = bitmap.source || bitmap.image;\r\n        if (!tImg)\r\n            return;\r\n        if (tImg instanceof HTMLImageElement) {\r\n            ctx.drawImage(tImg, 0, 0, 1, 1);\r\n            var info = ctx.getImageData(0, 0, 1, 1);\r\n        }\r\n    }\r\n}\r\nLoaderManager._resMap = {};\r\nLoaderManager.createMap = { atlas: [null, Loader.ATLAS] };\r\nclass ResInfo extends EventDispatcher {\r\n}\r\n//# sourceMappingURL=LoaderManager.js.map",
  "references": [
    "D:/widgets/LayaDataStructuresAlgorithms/libs/ILaya.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/events/Event.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/events/EventDispatcher.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/net/URL.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/resource/ICreateResource.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/resource/Resource.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/resource/Texture.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/utils/Handler.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/utils/Utils.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/net/AtlasInfoManager.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/net/Loader.ts"
  ],
  "map": "{\"version\":3,\"file\":\"LoaderManager.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../libs/laya/net/LoaderManager.ts\"],\"names\":[],\"mappings\":\"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\"}",
  "dts": {
    "name": "D:/widgets/LayaDataStructuresAlgorithms/.rpt2_cache/placeholder/laya/net/LoaderManager.d.ts",
    "writeByteOrderMark": false,
    "text": "import { EventDispatcher } from \"../events/EventDispatcher\";\r\nimport { Handler } from \"../utils/Handler\";\r\nexport declare class LoaderManager extends EventDispatcher {\r\n    private static _resMap;\r\n    static createMap: any;\r\n    retryNum: number;\r\n    retryDelay: number;\r\n    maxLoader: number;\r\n    private _loaders;\r\n    private _loaderCount;\r\n    private _resInfos;\r\n    private _infoPool;\r\n    private _maxPriority;\r\n    private _failRes;\r\n    private _statInfo;\r\n    getProgress(): number;\r\n    resetProgress(): void;\r\n    constructor();\r\n    create(url: any, complete?: Handler | null, progress?: Handler | null, type?: string | null, constructParams?: any[] | null, propertyParams?: any, priority?: number, cache?: boolean): void;\r\n    _create(url: any, mainResou: boolean, complete?: Handler | null, progress?: Handler | null, type?: string | null, constructParams?: any[] | null, propertyParams?: any, priority?: number, cache?: boolean): void;\r\n    private _createOne;\r\n    load(url: string | string[] | loadItem[], complete?: Handler | null, progress?: Handler | null, type?: string | null, priority?: number, cache?: boolean, group?: string | null, ignoreCache?: boolean, useWorkerLoader?: boolean): LoaderManager;\r\n    private _resInfoLoaded;\r\n    _createLoad(url: any, complete?: Handler | null, progress?: Handler | null, type?: string | null, constructParams?: any[] | null, propertyParams?: any, priority?: number, cache?: boolean, ignoreCache?: boolean): LoaderManager;\r\n    private _next;\r\n    private _doLoad;\r\n    private _endLoad;\r\n    private _addReTry;\r\n    clearRes(url: string): void;\r\n    clearTextureRes(url: string): void;\r\n    getRes(url: string): any;\r\n    cacheRes(url: string, data: any): void;\r\n    setGroup(url: string, group: string): void;\r\n    clearResByGroup(group: string): void;\r\n    static cacheRes(url: string, data: any): void;\r\n    clearUnLoaded(): void;\r\n    cancelLoadByUrls(urls: any[]): void;\r\n    cancelLoadByUrl(url: string): void;\r\n    private _loadAssets;\r\n    decodeBitmaps(urls: any[]): void;\r\n    private _decodeTexture;\r\n}\r\nexport interface loadItem {\r\n    url: string;\r\n    type?: string;\r\n    size?: number;\r\n    priority?: number;\r\n    useWorkerLoader?: boolean;\r\n    progress?: number;\r\n    group?: string;\r\n}\r\n"
  }
}
