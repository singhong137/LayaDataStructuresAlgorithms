{
  "code": "import { Event } from \"../events/Event\";\r\nimport { AudioSound } from \"./h5audio/AudioSound\";\r\nimport { WebAudioSound } from \"./webaudio/WebAudioSound\";\r\nimport { URL } from \"../net/URL\";\r\nimport { Utils } from \"../utils/Utils\";\r\nimport { ILaya } from \"../../ILaya\";\r\nexport class SoundManager {\r\n    static __init__() {\r\n        var win = ILaya.Browser.window;\r\n        var supportWebAudio = win[\"AudioContext\"] || win[\"webkitAudioContext\"] || win[\"mozAudioContext\"] ? true : false;\r\n        if (supportWebAudio)\r\n            WebAudioSound.initWebAudio();\r\n        SoundManager._soundClass = supportWebAudio ? WebAudioSound : AudioSound;\r\n        AudioSound._initMusicAudio();\r\n        SoundManager._musicClass = AudioSound;\r\n        return supportWebAudio;\r\n    }\r\n    static addChannel(channel) {\r\n        if (SoundManager._channels.indexOf(channel) >= 0)\r\n            return;\r\n        SoundManager._channels.push(channel);\r\n    }\r\n    static removeChannel(channel) {\r\n        var i;\r\n        for (i = SoundManager._channels.length - 1; i >= 0; i--) {\r\n            if (SoundManager._channels[i] == channel) {\r\n                SoundManager._channels.splice(i, 1);\r\n            }\r\n        }\r\n    }\r\n    static disposeSoundLater(url) {\r\n        SoundManager._lastSoundUsedTimeDic[url] = ILaya.Browser.now();\r\n        if (!SoundManager._isCheckingDispose) {\r\n            SoundManager._isCheckingDispose = true;\r\n            ILaya.timer.loop(5000, null, SoundManager._checkDisposeSound);\r\n        }\r\n    }\r\n    static _checkDisposeSound() {\r\n        var key;\r\n        var tTime = ILaya.Browser.now();\r\n        var hasCheck = false;\r\n        for (key in SoundManager._lastSoundUsedTimeDic) {\r\n            if (tTime - SoundManager._lastSoundUsedTimeDic[key] > 30000) {\r\n                delete SoundManager._lastSoundUsedTimeDic[key];\r\n                SoundManager.disposeSoundIfNotUsed(key);\r\n            }\r\n            else {\r\n                hasCheck = true;\r\n            }\r\n        }\r\n        if (!hasCheck) {\r\n            SoundManager._isCheckingDispose = false;\r\n            ILaya.timer.clear(null, SoundManager._checkDisposeSound);\r\n        }\r\n    }\r\n    static disposeSoundIfNotUsed(url) {\r\n        var i;\r\n        for (i = SoundManager._channels.length - 1; i >= 0; i--) {\r\n            if (SoundManager._channels[i].url == url) {\r\n                return;\r\n            }\r\n        }\r\n        SoundManager.destroySound(url);\r\n    }\r\n    static set autoStopMusic(v) {\r\n        ILaya.stage.off(Event.BLUR, null, SoundManager._stageOnBlur);\r\n        ILaya.stage.off(Event.FOCUS, null, SoundManager._stageOnFocus);\r\n        ILaya.stage.off(Event.VISIBILITY_CHANGE, null, SoundManager._visibilityChange);\r\n        SoundManager._autoStopMusic = v;\r\n        if (v) {\r\n            ILaya.stage.on(Event.BLUR, null, SoundManager._stageOnBlur);\r\n            ILaya.stage.on(Event.FOCUS, null, SoundManager._stageOnFocus);\r\n            ILaya.stage.on(Event.VISIBILITY_CHANGE, null, SoundManager._visibilityChange);\r\n        }\r\n    }\r\n    static get autoStopMusic() {\r\n        return SoundManager._autoStopMusic;\r\n    }\r\n    static _visibilityChange() {\r\n        if (ILaya.stage.isVisibility) {\r\n            SoundManager._stageOnFocus();\r\n        }\r\n        else {\r\n            SoundManager._stageOnBlur();\r\n        }\r\n    }\r\n    static _stageOnBlur() {\r\n        SoundManager._isActive = false;\r\n        if (SoundManager._musicChannel) {\r\n            if (!SoundManager._musicChannel.isStopped) {\r\n                SoundManager._blurPaused = true;\r\n                SoundManager._musicChannel.pause();\r\n            }\r\n        }\r\n        SoundManager.stopAllSound();\r\n        ILaya.stage.once(Event.MOUSE_DOWN, null, SoundManager._stageOnFocus);\r\n    }\r\n    static _recoverWebAudio() {\r\n        if (WebAudioSound.ctx && WebAudioSound.ctx.state != \"running\" && WebAudioSound.ctx.resume)\r\n            WebAudioSound.ctx.resume();\r\n    }\r\n    static _stageOnFocus() {\r\n        SoundManager._isActive = true;\r\n        SoundManager._recoverWebAudio();\r\n        ILaya.stage.off(Event.MOUSE_DOWN, null, SoundManager._stageOnFocus);\r\n        if (SoundManager._blurPaused) {\r\n            if (SoundManager._musicChannel && SoundManager._musicChannel.isStopped) {\r\n                SoundManager._blurPaused = false;\r\n                SoundManager._musicChannel.resume();\r\n            }\r\n        }\r\n    }\r\n    static set muted(value) {\r\n        if (value == SoundManager._muted)\r\n            return;\r\n        if (value) {\r\n            SoundManager.stopAllSound();\r\n        }\r\n        SoundManager.musicMuted = value;\r\n        SoundManager._muted = value;\r\n    }\r\n    static get muted() {\r\n        return SoundManager._muted;\r\n    }\r\n    static set soundMuted(value) {\r\n        SoundManager._soundMuted = value;\r\n    }\r\n    static get soundMuted() {\r\n        return SoundManager._soundMuted;\r\n    }\r\n    static set musicMuted(value) {\r\n        if (value == SoundManager._musicMuted)\r\n            return;\r\n        if (value) {\r\n            if (SoundManager._bgMusic) {\r\n                if (SoundManager._musicChannel && !SoundManager._musicChannel.isStopped) {\r\n                    if (ILaya.Render.isConchApp) {\r\n                        if (SoundManager._musicChannel._audio)\r\n                            SoundManager._musicChannel._audio.muted = true;\r\n                        ;\r\n                    }\r\n                    else {\r\n                        SoundManager._musicChannel.pause();\r\n                    }\r\n                }\r\n                else {\r\n                    SoundManager._musicChannel = null;\r\n                }\r\n            }\r\n            else {\r\n                SoundManager._musicChannel = null;\r\n            }\r\n            SoundManager._musicMuted = value;\r\n        }\r\n        else {\r\n            SoundManager._musicMuted = value;\r\n            if (SoundManager._bgMusic) {\r\n                if (SoundManager._musicChannel) {\r\n                    if (ILaya.Render.isConchApp) {\r\n                        if (SoundManager._musicChannel._audio)\r\n                            SoundManager._musicChannel._audio.muted = false;\r\n                        ;\r\n                    }\r\n                    else {\r\n                        SoundManager._musicChannel.resume();\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    static get musicMuted() {\r\n        return SoundManager._musicMuted;\r\n    }\r\n    static get useAudioMusic() {\r\n        return SoundManager._useAudioMusic;\r\n    }\r\n    static set useAudioMusic(value) {\r\n        SoundManager._useAudioMusic = value;\r\n        if (value) {\r\n            SoundManager._musicClass = AudioSound;\r\n        }\r\n        else {\r\n            SoundManager._musicClass = null;\r\n        }\r\n    }\r\n    static playSound(url, loops = 1, complete = null, soundClass = null, startTime = 0) {\r\n        if (!SoundManager._isActive || !url)\r\n            return null;\r\n        if (SoundManager._muted)\r\n            return null;\r\n        SoundManager._recoverWebAudio();\r\n        url = URL.formatURL(url);\r\n        if (url == SoundManager._bgMusic) {\r\n            if (SoundManager._musicMuted)\r\n                return null;\r\n        }\r\n        else {\r\n            if (ILaya.Render.isConchApp) {\r\n                var ext = Utils.getFileExtension(url);\r\n                if (ext != \"wav\" && ext != \"ogg\") {\r\n                    alert(\"The sound only supports wav or ogg format,for optimal performance reason,please refer to the official website document.\");\r\n                    return null;\r\n                }\r\n            }\r\n            if (SoundManager._soundMuted)\r\n                return null;\r\n        }\r\n        var tSound;\r\n        if (!ILaya.Browser.onBDMiniGame && !ILaya.Browser.onMiniGame && !ILaya.Browser.onKGMiniGame && !ILaya.Browser.onQGMiniGame && !ILaya.Browser.onVVMiniGame && !ILaya.Browser.onAlipayMiniGame && !ILaya.Browser.onQQMiniGame && !ILaya.Browser.onBLMiniGame) {\r\n            tSound = ILaya.loader.getRes(url);\r\n        }\r\n        if (!soundClass)\r\n            soundClass = SoundManager._soundClass;\r\n        if (!tSound) {\r\n            tSound = new soundClass();\r\n            tSound.load(url);\r\n            if (!ILaya.Browser.onBDMiniGame && !ILaya.Browser.onMiniGame && !ILaya.Browser.onKGMiniGame && !ILaya.Browser.onQGMiniGame && !ILaya.Browser.onVVMiniGame && !ILaya.Browser.onAlipayMiniGame && !ILaya.Browser.onQQMiniGame && !ILaya.Browser.onBLMiniGame) {\r\n                ILaya.Loader.cacheRes(url, tSound);\r\n            }\r\n        }\r\n        var channel;\r\n        channel = tSound.play(startTime, loops);\r\n        if (!channel)\r\n            return null;\r\n        channel.url = url;\r\n        channel.volume = (url == SoundManager._bgMusic) ? SoundManager.musicVolume : SoundManager.soundVolume;\r\n        channel.completeHandler = complete;\r\n        return channel;\r\n    }\r\n    static destroySound(url) {\r\n        var tSound = ILaya.loader.getRes(url);\r\n        if (tSound) {\r\n            ILaya.Loader.clearRes(url);\r\n            tSound.dispose();\r\n        }\r\n    }\r\n    static playMusic(url, loops = 0, complete = null, startTime = 0) {\r\n        url = URL.formatURL(url);\r\n        SoundManager._bgMusic = url;\r\n        if (SoundManager._musicChannel)\r\n            SoundManager._musicChannel.stop();\r\n        return SoundManager._musicChannel = SoundManager.playSound(url, loops, complete, SoundManager._musicClass, startTime);\r\n    }\r\n    static stopSound(url) {\r\n        url = URL.formatURL(url);\r\n        var i;\r\n        var channel;\r\n        for (i = SoundManager._channels.length - 1; i >= 0; i--) {\r\n            channel = SoundManager._channels[i];\r\n            if (channel.url == url) {\r\n                channel.stop();\r\n            }\r\n        }\r\n    }\r\n    static stopAll() {\r\n        SoundManager._bgMusic = null;\r\n        var i;\r\n        var channel;\r\n        for (i = SoundManager._channels.length - 1; i >= 0; i--) {\r\n            channel = SoundManager._channels[i];\r\n            channel.stop();\r\n        }\r\n    }\r\n    static stopAllSound() {\r\n        var i;\r\n        var channel;\r\n        for (i = SoundManager._channels.length - 1; i >= 0; i--) {\r\n            channel = SoundManager._channels[i];\r\n            if (channel.url != SoundManager._bgMusic) {\r\n                channel.stop();\r\n            }\r\n        }\r\n    }\r\n    static stopMusic() {\r\n        if (SoundManager._musicChannel)\r\n            SoundManager._musicChannel.stop();\r\n        SoundManager._bgMusic = null;\r\n    }\r\n    static setSoundVolume(volume, url = null) {\r\n        if (url) {\r\n            url = URL.formatURL(url);\r\n            SoundManager._setVolume(url, volume);\r\n        }\r\n        else {\r\n            SoundManager.soundVolume = volume;\r\n            var i;\r\n            var channel;\r\n            for (i = SoundManager._channels.length - 1; i >= 0; i--) {\r\n                channel = SoundManager._channels[i];\r\n                if (channel.url != SoundManager._bgMusic) {\r\n                    channel.volume = volume;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    static setMusicVolume(volume) {\r\n        SoundManager.musicVolume = volume;\r\n        SoundManager._setVolume(SoundManager._bgMusic, volume);\r\n    }\r\n    static _setVolume(url, volume) {\r\n        url = URL.formatURL(url);\r\n        var i;\r\n        var channel;\r\n        for (i = SoundManager._channels.length - 1; i >= 0; i--) {\r\n            channel = SoundManager._channels[i];\r\n            if (channel.url == url) {\r\n                channel.volume = volume;\r\n            }\r\n        }\r\n    }\r\n}\r\nSoundManager.musicVolume = 1;\r\nSoundManager.soundVolume = 1;\r\nSoundManager.playbackRate = 1;\r\nSoundManager._useAudioMusic = true;\r\nSoundManager._muted = false;\r\nSoundManager._soundMuted = false;\r\nSoundManager._musicMuted = false;\r\nSoundManager._bgMusic = null;\r\nSoundManager._musicChannel = null;\r\nSoundManager._channels = [];\r\nSoundManager._blurPaused = false;\r\nSoundManager._isActive = true;\r\nSoundManager._lastSoundUsedTimeDic = {};\r\nSoundManager._isCheckingDispose = false;\r\nSoundManager.autoReleaseSound = true;\r\n//# sourceMappingURL=SoundManager.js.map",
  "references": [
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/media/SoundChannel.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/events/Event.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/media/h5audio/AudioSound.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/media/webaudio/WebAudioSound.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/net/URL.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/utils/Handler.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/utils/Utils.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/media/Sound.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/display/Stage.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/net/LoaderManager.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/utils/Timer.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/ILaya.ts"
  ],
  "map": "{\"version\":3,\"file\":\"SoundManager.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../libs/laya/media/SoundManager.ts\"],\"names\":[],\"mappings\":\"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\"}",
  "dts": {
    "name": "D:/widgets/LayaDataStructuresAlgorithms/.rpt2_cache/placeholder/laya/media/SoundManager.d.ts",
    "writeByteOrderMark": false,
    "text": "import { SoundChannel } from \"./SoundChannel\";\r\nimport { Handler } from \"../utils/Handler\";\r\nexport declare class SoundManager {\r\n    static musicVolume: number;\r\n    static soundVolume: number;\r\n    static playbackRate: number;\r\n    private static _useAudioMusic;\r\n    private static _muted;\r\n    private static _soundMuted;\r\n    private static _musicMuted;\r\n    static _bgMusic: string;\r\n    private static _musicChannel;\r\n    private static _channels;\r\n    private static _autoStopMusic;\r\n    private static _blurPaused;\r\n    private static _isActive;\r\n    static _soundClass: new () => any;\r\n    static _musicClass: new () => any;\r\n    private static _lastSoundUsedTimeDic;\r\n    private static _isCheckingDispose;\r\n    static __init__(): boolean;\r\n    static autoReleaseSound: boolean;\r\n    static addChannel(channel: SoundChannel): void;\r\n    static removeChannel(channel: SoundChannel): void;\r\n    static disposeSoundLater(url: string): void;\r\n    private static _checkDisposeSound;\r\n    static disposeSoundIfNotUsed(url: string): void;\r\n    static autoStopMusic: boolean;\r\n    private static _visibilityChange;\r\n    private static _stageOnBlur;\r\n    private static _recoverWebAudio;\r\n    private static _stageOnFocus;\r\n    static muted: boolean;\r\n    static soundMuted: boolean;\r\n    static musicMuted: boolean;\r\n    static useAudioMusic: boolean;\r\n    static playSound(url: string, loops?: number, complete?: Handler, soundClass?: new () => any, startTime?: number): SoundChannel;\r\n    static destroySound(url: string): void;\r\n    static playMusic(url: string, loops?: number, complete?: Handler, startTime?: number): SoundChannel;\r\n    static stopSound(url: string): void;\r\n    static stopAll(): void;\r\n    static stopAllSound(): void;\r\n    static stopMusic(): void;\r\n    static setSoundVolume(volume: number, url?: string): void;\r\n    static setMusicVolume(volume: number): void;\r\n    private static _setVolume;\r\n}\r\n"
  }
}
