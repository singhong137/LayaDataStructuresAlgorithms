{
  "code": "import { Handler } from \"../utils/Handler\";\r\nexport class EventDispatcher {\r\n    hasListener(type) {\r\n        var listener = this._events && this._events[type];\r\n        return !!listener;\r\n    }\r\n    event(type, data = null) {\r\n        if (!this._events || !this._events[type])\r\n            return false;\r\n        var listeners = this._events[type];\r\n        if (listeners.run) {\r\n            if (listeners.once)\r\n                delete this._events[type];\r\n            data != null ? listeners.runWith(data) : listeners.run();\r\n        }\r\n        else {\r\n            for (var i = 0, n = listeners.length; i < n; i++) {\r\n                var listener = listeners[i];\r\n                if (listener) {\r\n                    (data != null) ? listener.runWith(data) : listener.run();\r\n                }\r\n                if (!listener || listener.once) {\r\n                    listeners.splice(i, 1);\r\n                    i--;\r\n                    n--;\r\n                }\r\n            }\r\n            if (listeners.length === 0 && this._events)\r\n                delete this._events[type];\r\n        }\r\n        return true;\r\n    }\r\n    on(type, caller, listener, args = null) {\r\n        return this._createListener(type, caller, listener, args, false);\r\n    }\r\n    once(type, caller, listener, args = null) {\r\n        return this._createListener(type, caller, listener, args, true);\r\n    }\r\n    _createListener(type, caller, listener, args, once, offBefore = true) {\r\n        offBefore && this.off(type, caller, listener, once);\r\n        var handler = EventHandler.create(caller || this, listener, args, once);\r\n        this._events || (this._events = {});\r\n        var events = this._events;\r\n        if (!events[type])\r\n            events[type] = handler;\r\n        else {\r\n            if (!events[type].run)\r\n                events[type].push(handler);\r\n            else\r\n                events[type] = [events[type], handler];\r\n        }\r\n        return this;\r\n    }\r\n    off(type, caller, listener, onceOnly = false) {\r\n        if (!this._events || !this._events[type])\r\n            return this;\r\n        var listeners = this._events[type];\r\n        if (listeners != null) {\r\n            if (listeners.run) {\r\n                if ((!caller || listeners.caller === caller) && (listener == null || listeners.method === listener) && (!onceOnly || listeners.once)) {\r\n                    delete this._events[type];\r\n                    listeners.recover();\r\n                }\r\n            }\r\n            else {\r\n                var count = 0;\r\n                for (var i = 0, n = listeners.length; i < n; i++) {\r\n                    var item = listeners[i];\r\n                    if (!item) {\r\n                        count++;\r\n                        continue;\r\n                    }\r\n                    if (item && (!caller || item.caller === caller) && (listener == null || item.method === listener) && (!onceOnly || item.once)) {\r\n                        count++;\r\n                        listeners[i] = null;\r\n                        item.recover();\r\n                    }\r\n                }\r\n                if (count === n)\r\n                    delete this._events[type];\r\n            }\r\n        }\r\n        return this;\r\n    }\r\n    offAll(type = null) {\r\n        var events = this._events;\r\n        if (!events)\r\n            return this;\r\n        if (type) {\r\n            this._recoverHandlers(events[type]);\r\n            delete events[type];\r\n        }\r\n        else {\r\n            for (var name in events) {\r\n                this._recoverHandlers(events[name]);\r\n            }\r\n            this._events = null;\r\n        }\r\n        return this;\r\n    }\r\n    offAllCaller(caller) {\r\n        if (caller && this._events) {\r\n            for (var name in this._events) {\r\n                this.off(name, caller, null);\r\n            }\r\n        }\r\n        return this;\r\n    }\r\n    _recoverHandlers(arr) {\r\n        if (!arr)\r\n            return;\r\n        if (arr.run) {\r\n            arr.recover();\r\n        }\r\n        else {\r\n            for (var i = arr.length - 1; i > -1; i--) {\r\n                if (arr[i]) {\r\n                    arr[i].recover();\r\n                    arr[i] = null;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    isMouseEvent(type) {\r\n        return EventDispatcher.MOUSE_EVENTS[type] || false;\r\n    }\r\n}\r\nEventDispatcher.MOUSE_EVENTS = { \"rightmousedown\": true, \"rightmouseup\": true, \"rightclick\": true, \"mousedown\": true, \"mouseup\": true, \"mousemove\": true, \"mouseover\": true, \"mouseout\": true, \"click\": true, \"doubleclick\": true };\r\nclass EventHandler extends Handler {\r\n    constructor(caller, method, args, once) {\r\n        super(caller, method, args, once);\r\n    }\r\n    recover() {\r\n        if (this._id > 0) {\r\n            this._id = 0;\r\n            EventHandler._pool.push(this.clear());\r\n        }\r\n    }\r\n    static create(caller, method, args = null, once = true) {\r\n        if (EventHandler._pool.length)\r\n            return EventHandler._pool.pop().setTo(caller, method, args, once);\r\n        return new EventHandler(caller, method, args, once);\r\n    }\r\n}\r\nEventHandler._pool = [];\r\n//# sourceMappingURL=EventDispatcher.js.map",
  "references": [
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/utils/Handler.ts"
  ],
  "map": "{\"version\":3,\"file\":\"EventDispatcher.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../libs/laya/events/EventDispatcher.ts\"],\"names\":[],\"mappings\":\"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\"}",
  "dts": {
    "name": "D:/widgets/LayaDataStructuresAlgorithms/.rpt2_cache/placeholder/laya/events/EventDispatcher.d.ts",
    "writeByteOrderMark": false,
    "text": "export declare class EventDispatcher {\r\n    static MOUSE_EVENTS: any;\r\n    private _events;\r\n    hasListener(type: string): boolean;\r\n    event(type: string, data?: any): boolean;\r\n    on(type: string, caller: any, listener: Function, args?: any[]): EventDispatcher;\r\n    once(type: string, caller: any, listener: Function, args?: any[]): EventDispatcher;\r\n    _createListener(type: string, caller: any, listener: Function, args: any[], once: boolean, offBefore?: boolean): EventDispatcher;\r\n    off(type: string, caller: any, listener: Function, onceOnly?: boolean): EventDispatcher;\r\n    offAll(type?: string): EventDispatcher;\r\n    offAllCaller(caller: any): EventDispatcher;\r\n    private _recoverHandlers;\r\n    isMouseEvent(type: string): boolean;\r\n}\r\n"
  }
}
