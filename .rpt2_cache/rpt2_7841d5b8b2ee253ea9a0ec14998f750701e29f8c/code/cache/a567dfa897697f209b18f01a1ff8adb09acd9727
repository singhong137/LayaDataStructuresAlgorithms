{
  "code": "import { Loader } from \"./Loader\";\r\nimport { URL } from \"./URL\";\r\nimport { Handler } from \"../utils/Handler\";\r\nimport { ILaya } from \"../../ILaya\";\r\nexport class ResourceVersion {\r\n    static enable(manifestFile, callback, type = 2) {\r\n        ResourceVersion.type = type;\r\n        ILaya.loader.load(manifestFile, Handler.create(null, ResourceVersion.onManifestLoaded, [callback]), null, Loader.JSON);\r\n    }\r\n    static onManifestLoaded(callback, data) {\r\n        ResourceVersion.manifest = data;\r\n        URL.customFormat = ResourceVersion.addVersionPrefix;\r\n        callback.run();\r\n        if (!data) {\r\n            console.warn(\"资源版本清单文件不存在，不使用资源版本管理。忽略ERR_FILE_NOT_FOUND错误。\");\r\n        }\r\n    }\r\n    static addVersionPrefix(originURL) {\r\n        originURL = URL.getAdptedFilePath(originURL);\r\n        if (ResourceVersion.manifest && ResourceVersion.manifest[originURL]) {\r\n            if (ResourceVersion.type == ResourceVersion.FILENAME_VERSION)\r\n                return ResourceVersion.manifest[originURL];\r\n            return ResourceVersion.manifest[originURL] + \"/\" + originURL;\r\n        }\r\n        return originURL;\r\n    }\r\n}\r\nResourceVersion.FOLDER_VERSION = 1;\r\nResourceVersion.FILENAME_VERSION = 2;\r\nResourceVersion.type = ResourceVersion.FOLDER_VERSION;\r\n//# sourceMappingURL=ResourceVersion.js.map",
  "references": [
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/net/Loader.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/net/URL.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/utils/Handler.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/ILaya.ts"
  ],
  "map": "{\"version\":3,\"file\":\"ResourceVersion.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../libs/laya/net/ResourceVersion.ts\"],\"names\":[],\"mappings\":\"AAAA,OAAO,EAAE,MAAM,EAAE,MAAM,UAAU,CAAC;AAClC,OAAO,EAAE,GAAG,EAAE,MAAM,OAAO,CAAC;AAC5B,OAAO,EAAE,OAAO,EAAE,MAAM,kBAAkB,CAAA;AAC1C,OAAO,EAAE,KAAK,EAAE,MAAM,aAAa,CAAC;AAMpC,MAAM,OAAO,eAAe;IAiBxB,MAAM,CAAC,MAAM,CAAC,YAAoB,EAAE,QAAiB,EAAE,OAAe,CAAC;QACnE,eAAe,CAAC,IAAI,GAAG,IAAI,CAAC;QAC5B,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,YAAY,EAAE,OAAO,CAAC,MAAM,CAAC,IAAI,EAAE,eAAe,CAAC,gBAAgB,EAAE,CAAC,QAAQ,CAAC,CAAC,EAAE,IAAI,EAAE,MAAM,CAAC,IAAI,CAAC,CAAC;IAC3H,CAAC;IAEO,MAAM,CAAC,gBAAgB,CAAC,QAAiB,EAAE,IAAS;QACxD,eAAe,CAAC,QAAQ,GAAG,IAAI,CAAC;QAChC,GAAG,CAAC,YAAY,GAAG,eAAe,CAAC,gBAAgB,CAAC;QACpD,QAAQ,CAAC,GAAG,EAAE,CAAC;QACf,IAAI,CAAC,IAAI,EAAE;YACP,OAAO,CAAC,IAAI,CAAC,+CAA+C,CAAC,CAAC;SACjE;IACL,CAAC;IAOD,MAAM,CAAC,gBAAgB,CAAC,SAAiB;QACrC,SAAS,GAAG,GAAG,CAAC,iBAAiB,CAAC,SAAS,CAAC,CAAC;QAC7C,IAAI,eAAe,CAAC,QAAQ,IAAI,eAAe,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE;YACjE,IAAI,eAAe,CAAC,IAAI,IAAI,eAAe,CAAC,gBAAgB;gBAAE,OAAO,eAAe,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC;YACzG,OAAO,eAAe,CAAC,QAAQ,CAAC,SAAS,CAAC,GAAG,GAAG,GAAG,SAAS,CAAC;SAChE;QAED,OAAO,SAAS,CAAC;IACrB,CAAC;;AA1CM,8BAAc,GAAW,CAAC,CAAC;AAE3B,gCAAgB,GAAW,CAAC,CAAC;AAI7B,oBAAI,GAAW,eAAe,CAAC,cAAc,CAAC\"}",
  "dts": {
    "name": "D:/widgets/LayaDataStructuresAlgorithms/.rpt2_cache/placeholder/laya/net/ResourceVersion.d.ts",
    "writeByteOrderMark": false,
    "text": "import { Handler } from \"../utils/Handler\";\r\nexport declare class ResourceVersion {\r\n    static FOLDER_VERSION: number;\r\n    static FILENAME_VERSION: number;\r\n    static manifest: any;\r\n    static type: number;\r\n    static enable(manifestFile: string, callback: Handler, type?: number): void;\r\n    private static onManifestLoaded;\r\n    static addVersionPrefix(originURL: string): string;\r\n}\r\n"
  }
}
