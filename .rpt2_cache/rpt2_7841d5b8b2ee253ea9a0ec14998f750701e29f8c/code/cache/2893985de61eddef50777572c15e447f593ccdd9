{
  "code": "import { Event } from \"../events/Event\";\r\nimport { AutoBitmap } from \"./AutoBitmap\";\r\nimport { Clip } from \"./Clip\";\r\nimport { ILaya } from \"../../ILaya\";\r\nimport { ClassUtils } from \"../utils/ClassUtils\";\r\nexport class FontClip extends Clip {\r\n    constructor(skin = null, sheet = null) {\r\n        super();\r\n        this._valueArr = '';\r\n        this._indexMap = null;\r\n        this._sheet = null;\r\n        this._direction = \"horizontal\";\r\n        this._spaceX = 0;\r\n        this._spaceY = 0;\r\n        this._align = \"left\";\r\n        this._wordsW = 0;\r\n        this._wordsH = 0;\r\n        if (skin)\r\n            this.skin = skin;\r\n        if (sheet)\r\n            this.sheet = sheet;\r\n    }\r\n    createChildren() {\r\n        this._bitmap = new AutoBitmap();\r\n        this.on(Event.LOADED, this, this._onClipLoaded);\r\n    }\r\n    _onClipLoaded() {\r\n        this.callLater(this.changeValue);\r\n    }\r\n    get sheet() {\r\n        return this._sheet;\r\n    }\r\n    set sheet(value) {\r\n        value += \"\";\r\n        this._sheet = value;\r\n        var arr = value.split(\" \");\r\n        this._clipX = String(arr[0]).length;\r\n        this.clipY = arr.length;\r\n        this._indexMap = {};\r\n        for (var i = 0; i < this._clipY; i++) {\r\n            var line = arr[i].split(\"\");\r\n            for (var j = 0, n = line.length; j < n; j++) {\r\n                this._indexMap[line[j]] = i * this._clipX + j;\r\n            }\r\n        }\r\n    }\r\n    get value() {\r\n        if (!this._valueArr)\r\n            return \"\";\r\n        return this._valueArr;\r\n    }\r\n    set value(value) {\r\n        value += \"\";\r\n        this._valueArr = value;\r\n        this.callLater(this.changeValue);\r\n    }\r\n    get direction() {\r\n        return this._direction;\r\n    }\r\n    set direction(value) {\r\n        this._direction = value;\r\n        this.callLater(this.changeValue);\r\n    }\r\n    get spaceX() {\r\n        return this._spaceX;\r\n    }\r\n    set spaceX(value) {\r\n        this._spaceX = value;\r\n        if (this._direction === \"horizontal\")\r\n            this.callLater(this.changeValue);\r\n    }\r\n    get spaceY() {\r\n        return this._spaceY;\r\n    }\r\n    set spaceY(value) {\r\n        this._spaceY = value;\r\n        if (!(this._direction === \"horizontal\"))\r\n            this.callLater(this.changeValue);\r\n    }\r\n    set align(v) {\r\n        this._align = v;\r\n        this.callLater(this.changeValue);\r\n    }\r\n    get align() {\r\n        return this._align;\r\n    }\r\n    changeValue() {\r\n        if (!this._sources)\r\n            return;\r\n        if (!this._valueArr)\r\n            return;\r\n        this.graphics.clear(true);\r\n        var texture;\r\n        texture = this._sources[0];\r\n        if (!texture)\r\n            return;\r\n        var isHorizontal = (this._direction === \"horizontal\");\r\n        if (isHorizontal) {\r\n            this._wordsW = this._valueArr.length * (texture.sourceWidth + this.spaceX);\r\n            this._wordsH = texture.sourceHeight;\r\n        }\r\n        else {\r\n            this._wordsW = texture.sourceWidth;\r\n            this._wordsH = (texture.sourceHeight + this.spaceY) * this._valueArr.length;\r\n        }\r\n        var dX = 0;\r\n        if (this._width) {\r\n            switch (this._align) {\r\n                case \"center\":\r\n                    dX = 0.5 * (this._width - this._wordsW);\r\n                    break;\r\n                case \"right\":\r\n                    dX = this._width - this._wordsW;\r\n                    break;\r\n                default:\r\n                    dX = 0;\r\n            }\r\n        }\r\n        for (var i = 0, sz = this._valueArr.length; i < sz; i++) {\r\n            var index = this._indexMap[this._valueArr.charAt(i)];\r\n            if (!this.sources[index])\r\n                continue;\r\n            texture = this.sources[index];\r\n            if (isHorizontal)\r\n                this.graphics.drawImage(texture, dX + i * (texture.sourceWidth + this.spaceX), 0, texture.sourceWidth, texture.sourceHeight);\r\n            else\r\n                this.graphics.drawImage(texture, 0 + dX, i * (texture.sourceHeight + this.spaceY), texture.sourceWidth, texture.sourceHeight);\r\n        }\r\n        if (!this._width) {\r\n            this._widget.resetLayoutX();\r\n            this.callLater(this._sizeChanged);\r\n        }\r\n        if (!this._height) {\r\n            this._widget.resetLayoutY();\r\n            this.callLater(this._sizeChanged);\r\n        }\r\n    }\r\n    set width(value) {\r\n        super.width = value;\r\n        this.callLater(this.changeValue);\r\n    }\r\n    get width() {\r\n        return super.width;\r\n    }\r\n    set height(value) {\r\n        super.height = value;\r\n        this.callLater(this.changeValue);\r\n    }\r\n    get height() {\r\n        return super.height;\r\n    }\r\n    measureWidth() {\r\n        return this._wordsW;\r\n    }\r\n    measureHeight() {\r\n        return this._wordsH;\r\n    }\r\n    destroy(destroyChild = true) {\r\n        this._valueArr = null;\r\n        this._indexMap = null;\r\n        this.graphics.clear(true);\r\n        this.removeSelf();\r\n        this.off(Event.LOADED, this, this._onClipLoaded);\r\n        super.destroy(destroyChild);\r\n    }\r\n}\r\nILaya.regClass(FontClip);\r\nClassUtils.regClass(\"laya.ui.FontClip\", FontClip);\r\nClassUtils.regClass(\"Laya.FontClip\", FontClip);\r\n//# sourceMappingURL=FontClip.js.map",
  "references": [
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/events/Event.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/resource/Texture.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/ui/AutoBitmap.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/ui/Clip.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/ILaya.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/utils/ClassUtils.ts"
  ],
  "map": "{\"version\":3,\"file\":\"FontClip.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../libs/laya/ui/FontClip.ts\"],\"names\":[],\"mappings\":\"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\"}",
  "dts": {
    "name": "D:/widgets/LayaDataStructuresAlgorithms/.rpt2_cache/placeholder/laya/ui/FontClip.d.ts",
    "writeByteOrderMark": false,
    "text": "import { Clip } from \"./Clip\";\r\nexport declare class FontClip extends Clip {\r\n    protected _valueArr: string;\r\n    protected _indexMap: any;\r\n    protected _sheet: string;\r\n    protected _direction: string;\r\n    protected _spaceX: number;\r\n    protected _spaceY: number;\r\n    private _align;\r\n    private _wordsW;\r\n    private _wordsH;\r\n    constructor(skin?: string, sheet?: string);\r\n    protected createChildren(): void;\r\n    private _onClipLoaded;\r\n    sheet: string;\r\n    value: string;\r\n    direction: string;\r\n    spaceX: number;\r\n    spaceY: number;\r\n    align: string;\r\n    protected changeValue(): void;\r\n    width: number;\r\n    height: number;\r\n    protected measureWidth(): number;\r\n    protected measureHeight(): number;\r\n    destroy(destroyChild?: boolean): void;\r\n}\r\n"
  }
}
