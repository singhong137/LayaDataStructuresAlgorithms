{
  "code": "import { Stat } from \"../../utils/Stat\";\r\nimport { BlendMode } from \"../canvas/BlendMode\";\r\nimport { CONST3D2D } from \"../utils/CONST3D2D\";\r\nimport { WebGLContext } from \"../WebGLContext\";\r\nimport { SubmitBase } from \"./SubmitBase\";\r\nexport class Submit extends SubmitBase {\r\n    constructor(renderType = SubmitBase.TYPE_2D) {\r\n        super(renderType);\r\n    }\r\n    renderSubmit() {\r\n        if (this._numEle === 0 || !this._mesh || this._numEle == 0)\r\n            return 1;\r\n        var _tex = this.shaderValue.textureHost;\r\n        if (_tex) {\r\n            var source = _tex._getSource();\r\n            if (!source)\r\n                return 1;\r\n            this.shaderValue.texture = source;\r\n        }\r\n        var gl = WebGLContext.mainContext;\r\n        this._mesh.useMesh(gl);\r\n        this.shaderValue.upload();\r\n        if (BlendMode.activeBlendFunction !== this._blendFn) {\r\n            WebGLContext.setBlend(gl, true);\r\n            this._blendFn(gl);\r\n            BlendMode.activeBlendFunction = this._blendFn;\r\n        }\r\n        gl.drawElements(gl.TRIANGLES, this._numEle, gl.UNSIGNED_SHORT, this._startIdx);\r\n        Stat.renderBatches++;\r\n        Stat.trianglesFaces += this._numEle / 3;\r\n        return 1;\r\n    }\r\n    releaseRender() {\r\n        if (SubmitBase.RENDERBASE == this)\r\n            return;\r\n        if ((--this._ref) < 1) {\r\n            Submit.POOL[Submit._poolSize++] = this;\r\n            this.shaderValue.release();\r\n            this.shaderValue = null;\r\n            this._mesh = null;\r\n            this._parent && (this._parent.releaseRender(), this._parent = null);\r\n        }\r\n    }\r\n    static create(context, mesh, sv) {\r\n        var o = Submit._poolSize ? Submit.POOL[--Submit._poolSize] : new Submit();\r\n        o._ref = 1;\r\n        o._mesh = mesh;\r\n        o._key.clear();\r\n        o._startIdx = mesh.indexNum * CONST3D2D.BYTES_PIDX;\r\n        o._numEle = 0;\r\n        var blendType = context._nBlendType;\r\n        o._blendFn = context._targets ? BlendMode.targetFns[blendType] : BlendMode.fns[blendType];\r\n        o.shaderValue = sv;\r\n        o.shaderValue.setValue(context._shader2D);\r\n        var filters = context._shader2D.filters;\r\n        filters && o.shaderValue.setFilters(filters);\r\n        return o;\r\n    }\r\n    static createShape(ctx, mesh, numEle, sv) {\r\n        var o = Submit._poolSize ? Submit.POOL[--Submit._poolSize] : (new Submit());\r\n        o._mesh = mesh;\r\n        o._numEle = numEle;\r\n        o._startIdx = mesh.indexNum * 2;\r\n        o._ref = 1;\r\n        o.shaderValue = sv;\r\n        o.shaderValue.setValue(ctx._shader2D);\r\n        var blendType = ctx._nBlendType;\r\n        o._key.blendShader = blendType;\r\n        o._blendFn = ctx._targets ? BlendMode.targetFns[blendType] : BlendMode.fns[blendType];\r\n        return o;\r\n    }\r\n}\r\nSubmit._poolSize = 0;\r\nSubmit.POOL = [];\r\n//# sourceMappingURL=Submit.js.map",
  "references": [
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/resource/Context.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/resource/Texture.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/utils/Stat.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/webgl/canvas/BlendMode.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/webgl/shader/d2/value/Value2D.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/webgl/utils/CONST3D2D.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/webgl/utils/Mesh2D.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/webgl/WebGLContext.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/webgl/submit/SubmitBase.ts"
  ],
  "map": "{\"version\":3,\"file\":\"Submit.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../libs/laya/webgl/submit/Submit.ts\"],\"names\":[],\"mappings\":\"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\"}",
  "dts": {
    "name": "D:/widgets/LayaDataStructuresAlgorithms/.rpt2_cache/placeholder/laya/webgl/submit/Submit.d.ts",
    "writeByteOrderMark": false,
    "text": "import { Context } from \"../../resource/Context\";\r\nimport { Value2D } from \"../shader/d2/value/Value2D\";\r\nimport { Mesh2D } from \"../utils/Mesh2D\";\r\nimport { SubmitBase } from \"./SubmitBase\";\r\nexport declare class Submit extends SubmitBase {\r\n    protected static _poolSize: number;\r\n    protected static POOL: any[];\r\n    constructor(renderType?: number);\r\n    renderSubmit(): number;\r\n    releaseRender(): void;\r\n    static create(context: Context, mesh: Mesh2D, sv: Value2D): Submit;\r\n    static createShape(ctx: Context, mesh: Mesh2D, numEle: number, sv: Value2D): Submit;\r\n}\r\n"
  }
}
