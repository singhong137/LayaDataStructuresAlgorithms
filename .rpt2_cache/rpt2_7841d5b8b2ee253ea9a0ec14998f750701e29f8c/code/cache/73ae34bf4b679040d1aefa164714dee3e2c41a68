{
  "code": "import { LayaGL } from \"../../layagl/LayaGL\";\r\nimport { Mesh2D } from \"./Mesh2D\";\r\nexport class MeshTexture extends Mesh2D {\r\n    constructor() {\r\n        super(MeshTexture.const_stride, 4, 4);\r\n        this.canReuse = true;\r\n        this.setAttributes(MeshTexture._fixattriInfo);\r\n    }\r\n    static __init__() {\r\n        var gl = LayaGL.instance;\r\n        MeshTexture._fixattriInfo = [5126, 4, 0,\r\n            5121, 4, 16,\r\n            5121, 4, 20];\r\n    }\r\n    static getAMesh(mainctx) {\r\n        var ret;\r\n        if (MeshTexture._POOL.length) {\r\n            ret = MeshTexture._POOL.pop();\r\n        }\r\n        else\r\n            ret = new MeshTexture();\r\n        mainctx && ret._vb._resizeBuffer(64 * 1024 * MeshTexture.const_stride, false);\r\n        return ret;\r\n    }\r\n    addData(vertices, uvs, idx, matrix, rgba) {\r\n        var vb = this._vb;\r\n        var ib = this._ib;\r\n        var vertsz = vertices.length >> 1;\r\n        var startpos = vb.needSize(vertsz * MeshTexture.const_stride);\r\n        var f32pos = startpos >> 2;\r\n        var vbdata = vb._floatArray32 || vb.getFloat32Array();\r\n        var vbu32Arr = vb._uint32Array;\r\n        var ci = 0;\r\n        var m00 = matrix.a;\r\n        var m01 = matrix.b;\r\n        var m10 = matrix.c;\r\n        var m11 = matrix.d;\r\n        var tx = matrix.tx;\r\n        var ty = matrix.ty;\r\n        var i = 0;\r\n        for (i = 0; i < vertsz; i++) {\r\n            var x = vertices[ci], y = vertices[ci + 1];\r\n            vbdata[f32pos] = x * m00 + y * m10 + tx;\r\n            vbdata[f32pos + 1] = x * m01 + y * m11 + ty;\r\n            vbdata[f32pos + 2] = uvs[ci];\r\n            vbdata[f32pos + 3] = uvs[ci + 1];\r\n            vbu32Arr[f32pos + 4] = rgba;\r\n            vbu32Arr[f32pos + 5] = 0xff;\r\n            f32pos += 6;\r\n            ci += 2;\r\n        }\r\n        vb.setNeedUpload();\r\n        var vertN = this.vertNum;\r\n        var sz = idx.length;\r\n        var stib = ib.needSize(idx.byteLength);\r\n        var cidx = ib.getUint16Array();\r\n        var stibid = stib >> 1;\r\n        if (vertN > 0) {\r\n            var end = stibid + sz;\r\n            var si = 0;\r\n            for (i = stibid; i < end; i++, si++) {\r\n                cidx[i] = idx[si] + vertN;\r\n            }\r\n        }\r\n        else {\r\n            cidx.set(idx, stibid);\r\n        }\r\n        ib.setNeedUpload();\r\n        this.vertNum += vertsz;\r\n        this.indexNum += idx.length;\r\n    }\r\n    releaseMesh() {\r\n        this._vb.setByteLength(0);\r\n        this._ib.setByteLength(0);\r\n        this.vertNum = 0;\r\n        this.indexNum = 0;\r\n        MeshTexture._POOL.push(this);\r\n    }\r\n    destroy() {\r\n        this._ib.destroy();\r\n        this._vb.destroy();\r\n        this._ib.disposeResource();\r\n        this._vb.deleteBuffer();\r\n    }\r\n}\r\nMeshTexture.const_stride = 24;\r\nMeshTexture._POOL = [];\r\n//# sourceMappingURL=MeshTexture.js.map",
  "references": [
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/layagl/LayaGL.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/maths/Matrix.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/webgl/utils/IndexBuffer2D.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/webgl/utils/Mesh2D.ts",
    "D:/widgets/LayaDataStructuresAlgorithms/libs/laya/webgl/utils/VertexBuffer2D.ts"
  ],
  "map": "{\"version\":3,\"file\":\"MeshTexture.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../libs/laya/webgl/utils/MeshTexture.ts\"],\"names\":[],\"mappings\":\"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\"}",
  "dts": {
    "name": "D:/widgets/LayaDataStructuresAlgorithms/.rpt2_cache/placeholder/laya/webgl/utils/MeshTexture.d.ts",
    "writeByteOrderMark": false,
    "text": "import { Matrix } from \"../../maths/Matrix\";\r\nimport { Mesh2D } from \"./Mesh2D\";\r\nexport declare class MeshTexture extends Mesh2D {\r\n    static const_stride: number;\r\n    private static _fixattriInfo;\r\n    private static _POOL;\r\n    static __init__(): void;\r\n    constructor();\r\n    static getAMesh(mainctx: boolean): MeshTexture;\r\n    addData(vertices: Float32Array, uvs: Float32Array, idx: Uint16Array, matrix: Matrix, rgba: number): void;\r\n    releaseMesh(): void;\r\n    destroy(): void;\r\n}\r\n"
  }
}
